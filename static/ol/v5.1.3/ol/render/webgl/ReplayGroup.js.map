{"version":3,"file":"ReplayGroup.js","sources":["../../../../src/ol/render/webgl/ReplayGroup.js"],"sourcesContent":["/**\r\n * @module ol/render/webgl/ReplayGroup\r\n */\r\n\r\nimport {numberSafeCompareFunction} from '../../array.js';\r\nimport {buffer, createOrUpdateFromCoordinate} from '../../extent.js';\r\nimport {isEmpty} from '../../obj.js';\r\nimport {ORDER} from '../replay.js';\r\nimport ReplayGroup from '../ReplayGroup.js';\r\nimport WebGLCircleReplay from '../webgl/CircleReplay.js';\r\nimport WebGLImageReplay from '../webgl/ImageReplay.js';\r\nimport WebGLLineStringReplay from '../webgl/LineStringReplay.js';\r\nimport WebGLPolygonReplay from '../webgl/PolygonReplay.js';\r\nimport WebGLTextReplay from '../webgl/TextReplay.js';\r\n\r\n/**\r\n * @type {Array.<number>}\r\n */\r\nconst HIT_DETECTION_SIZE = [1, 1];\r\n\r\n/**\r\n * @type {Object.<module:ol/render/ReplayType,\r\n *                function(new: module:ol/render/webgl/Replay, number,\r\n *                module:ol/extent~Extent)>}\r\n */\r\nconst BATCH_CONSTRUCTORS = {\r\n  'Circle': WebGLCircleReplay,\r\n  'Image': WebGLImageReplay,\r\n  'LineString': WebGLLineStringReplay,\r\n  'Polygon': WebGLPolygonReplay,\r\n  'Text': WebGLTextReplay\r\n};\r\n\r\n\r\nclass WebGLReplayGroup extends ReplayGroup {\r\n  /**\r\n   * @param {number} tolerance Tolerance.\r\n   * @param {module:ol/extent~Extent} maxExtent Max extent.\r\n   * @param {number=} opt_renderBuffer Render buffer.\r\n   */\r\n  constructor(tolerance, maxExtent, opt_renderBuffer) {\r\n    super();\r\n\r\n    /**\r\n     * @type {module:ol/extent~Extent}\r\n     * @private\r\n     */\r\n    this.maxExtent_ = maxExtent;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.tolerance_ = tolerance;\r\n\r\n    /**\r\n     * @type {number|undefined}\r\n     * @private\r\n     */\r\n    this.renderBuffer_ = opt_renderBuffer;\r\n\r\n    /**\r\n     * @private\r\n     * @type {!Object.<string,\r\n     *        Object.<module:ol/render/ReplayType, module:ol/render/webgl/Replay>>}\r\n     */\r\n    this.replaysByZIndex_ = {};\r\n\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/style/Style} style Style.\r\n   * @param {boolean} group Group with previous replay.\r\n   */\r\n  addDeclutter(style, group) {}\r\n\r\n  /**\r\n   * @param {module:ol/webgl/Context} context WebGL context.\r\n   * @return {function()} Delete resources function.\r\n   */\r\n  getDeleteResourcesFunction(context) {\r\n    const functions = [];\r\n    let zKey;\r\n    for (zKey in this.replaysByZIndex_) {\r\n      const replays = this.replaysByZIndex_[zKey];\r\n      for (const replayKey in replays) {\r\n        functions.push(\r\n          replays[replayKey].getDeleteResourcesFunction(context));\r\n      }\r\n    }\r\n    return function() {\r\n      const length = functions.length;\r\n      let result;\r\n      for (let i = 0; i < length; i++) {\r\n        result = functions[i].apply(this, arguments);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   */\r\n  finish(context) {\r\n    let zKey;\r\n    for (zKey in this.replaysByZIndex_) {\r\n      const replays = this.replaysByZIndex_[zKey];\r\n      for (const replayKey in replays) {\r\n        replays[replayKey].finish(context);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  getReplay(zIndex, replayType) {\r\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\r\n    let replays = this.replaysByZIndex_[zIndexKey];\r\n    if (replays === undefined) {\r\n      replays = {};\r\n      this.replaysByZIndex_[zIndexKey] = replays;\r\n    }\r\n    let replay = replays[replayType];\r\n    if (replay === undefined) {\r\n      /**\r\n       * @type {Function}\r\n       */\r\n      const Constructor = BATCH_CONSTRUCTORS[replayType];\r\n      replay = new Constructor(this.tolerance_, this.maxExtent_);\r\n      replays[replayType] = replay;\r\n    }\r\n    return replay;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  isEmpty() {\r\n    return isEmpty(this.replaysByZIndex_);\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   * @param {module:ol/coordinate~Coordinate} center Center.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} rotation Rotation.\r\n   * @param {module:ol/size~Size} size Size.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {number} opacity Global opacity.\r\n   * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\r\n   */\r\n  replay(\r\n    context,\r\n    center,\r\n    resolution,\r\n    rotation,\r\n    size,\r\n    pixelRatio,\r\n    opacity,\r\n    skippedFeaturesHash\r\n  ) {\r\n    /** @type {Array.<number>} */\r\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\r\n    zs.sort(numberSafeCompareFunction);\r\n\r\n    let i, ii, j, jj, replays, replay;\r\n    for (i = 0, ii = zs.length; i < ii; ++i) {\r\n      replays = this.replaysByZIndex_[zs[i].toString()];\r\n      for (j = 0, jj = ORDER.length; j < jj; ++j) {\r\n        replay = replays[ORDER[j]];\r\n        if (replay !== undefined) {\r\n          replay.replay(context,\r\n            center, resolution, rotation, size, pixelRatio,\r\n            opacity, skippedFeaturesHash,\r\n            undefined, false);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   * @param {module:ol/coordinate~Coordinate} center Center.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} rotation Rotation.\r\n   * @param {module:ol/size~Size} size Size.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {number} opacity Global opacity.\r\n   * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\r\n   * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} featureCallback Feature callback.\r\n   * @param {boolean} oneByOne Draw features one-by-one for the hit-detecion.\r\n   * @param {module:ol/extent~Extent=} opt_hitExtent Hit extent: Only features intersecting\r\n   *  this extent are checked.\r\n   * @return {T|undefined} Callback result.\r\n   * @template T\r\n   */\r\n  replayHitDetection_(\r\n    context,\r\n    center,\r\n    resolution,\r\n    rotation,\r\n    size,\r\n    pixelRatio,\r\n    opacity,\r\n    skippedFeaturesHash,\r\n    featureCallback,\r\n    oneByOne,\r\n    opt_hitExtent\r\n  ) {\r\n    /** @type {Array.<number>} */\r\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\r\n    zs.sort(function(a, b) {\r\n      return b - a;\r\n    });\r\n\r\n    let i, ii, j, replays, replay, result;\r\n    for (i = 0, ii = zs.length; i < ii; ++i) {\r\n      replays = this.replaysByZIndex_[zs[i].toString()];\r\n      for (j = ORDER.length - 1; j >= 0; --j) {\r\n        replay = replays[ORDER[j]];\r\n        if (replay !== undefined) {\r\n          result = replay.replay(context,\r\n            center, resolution, rotation, size, pixelRatio, opacity,\r\n            skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent);\r\n          if (result) {\r\n            return result;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   * @param {module:ol/coordinate~Coordinate} center Center.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} rotation Rotation.\r\n   * @param {module:ol/size~Size} size Size.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {number} opacity Global opacity.\r\n   * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\r\n   * @param {function((module:ol/Feature|module:ol/render/Feature)): T|undefined} callback Feature callback.\r\n   * @return {T|undefined} Callback result.\r\n   * @template T\r\n   */\r\n  forEachFeatureAtCoordinate(\r\n    coordinate,\r\n    context,\r\n    center,\r\n    resolution,\r\n    rotation,\r\n    size,\r\n    pixelRatio,\r\n    opacity,\r\n    skippedFeaturesHash,\r\n    callback\r\n  ) {\r\n    const gl = context.getGL();\r\n    gl.bindFramebuffer(\r\n      gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\r\n\r\n\r\n    /**\r\n     * @type {module:ol/extent~Extent}\r\n     */\r\n    let hitExtent;\r\n    if (this.renderBuffer_ !== undefined) {\r\n      // build an extent around the coordinate, so that only features that\r\n      // intersect this extent are checked\r\n      hitExtent = buffer(createOrUpdateFromCoordinate(coordinate), resolution * this.renderBuffer_);\r\n    }\r\n\r\n    return this.replayHitDetection_(context,\r\n      coordinate, resolution, rotation, HIT_DETECTION_SIZE,\r\n      pixelRatio, opacity, skippedFeaturesHash,\r\n      /**\r\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\r\n       * @return {?} Callback result.\r\n       */\r\n      function(feature) {\r\n        const imageData = new Uint8Array(4);\r\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\r\n\r\n        if (imageData[3] > 0) {\r\n          const result = callback(feature);\r\n          if (result) {\r\n            return result;\r\n          }\r\n        }\r\n      }, true, hitExtent);\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   * @param {module:ol/coordinate~Coordinate} center Center.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} rotation Rotation.\r\n   * @param {module:ol/size~Size} size Size.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {number} opacity Global opacity.\r\n   * @param {Object.<string, boolean>} skippedFeaturesHash Ids of features to skip.\r\n   * @return {boolean} Is there a feature at the given coordinate?\r\n   */\r\n  hasFeatureAtCoordinate(\r\n    coordinate,\r\n    context,\r\n    center,\r\n    resolution,\r\n    rotation,\r\n    size,\r\n    pixelRatio,\r\n    opacity,\r\n    skippedFeaturesHash\r\n  ) {\r\n    const gl = context.getGL();\r\n    gl.bindFramebuffer(\r\n      gl.FRAMEBUFFER, context.getHitDetectionFramebuffer());\r\n\r\n    const hasFeature = this.replayHitDetection_(context,\r\n      coordinate, resolution, rotation, HIT_DETECTION_SIZE,\r\n      pixelRatio, opacity, skippedFeaturesHash,\r\n      /**\r\n       * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\r\n       * @return {boolean} Is there a feature?\r\n       */\r\n      function(feature) {\r\n        const imageData = new Uint8Array(4);\r\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, imageData);\r\n        return imageData[3] > 0;\r\n      }, false);\r\n\r\n    return hasFeature !== undefined;\r\n  }\r\n}\r\n\r\n\r\nexport default WebGLReplayGroup;\r\n"],"names":["const","super","let","this","arguments"],"mappings":"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"}