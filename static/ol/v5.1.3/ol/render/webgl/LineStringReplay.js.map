{"version":3,"file":"LineStringReplay.js","sources":["../../../../src/ol/render/webgl/LineStringReplay.js"],"sourcesContent":["/**\r\n * @module ol/render/webgl/LineStringReplay\r\n */\r\nimport {getUid} from '../../util.js';\r\nimport {equals} from '../../array.js';\r\nimport {asArray} from '../../color.js';\r\nimport {intersects} from '../../extent.js';\r\nimport {linearRingIsClockwise} from '../../geom/flat/orient.js';\r\nimport {translate} from '../../geom/flat/transform.js';\r\nimport {lineStringIsClosed} from '../../geom/flat/topology.js';\r\nimport {isEmpty} from '../../obj.js';\r\nimport {DEFAULT_LINECAP, DEFAULT_LINEDASH, DEFAULT_LINEDASHOFFSET,\r\n  DEFAULT_LINEJOIN, DEFAULT_LINEWIDTH, DEFAULT_MITERLIMIT, DEFAULT_STROKESTYLE,\r\n  triangleIsCounterClockwise} from '../webgl.js';\r\nimport WebGLReplay from '../webgl/Replay.js';\r\nimport {fragment, vertex} from '../webgl/linestringreplay/defaultshader.js';\r\nimport Locations from '../webgl/linestringreplay/defaultshader/Locations.js';\r\nimport {FLOAT} from '../../webgl.js';\r\nimport WebGLBuffer from '../../webgl/Buffer.js';\r\n\r\n\r\n/**\r\n * @enum {number}\r\n */\r\nconst Instruction = {\r\n  ROUND: 2,\r\n  BEGIN_LINE: 3,\r\n  END_LINE: 5,\r\n  BEGIN_LINE_CAP: 7,\r\n  END_LINE_CAP: 11,\r\n  BEVEL_FIRST: 13,\r\n  BEVEL_SECOND: 17,\r\n  MITER_BOTTOM: 19,\r\n  MITER_TOP: 23\r\n};\r\n\r\n\r\nclass WebGLLineStringReplay extends WebGLReplay {\r\n  /**\r\n   * @param {number} tolerance Tolerance.\r\n   * @param {module:ol/extent~Extent} maxExtent Max extent.\r\n   */\r\n  constructor(tolerance, maxExtent) {\r\n    super(tolerance, maxExtent);\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/render/webgl/linestringreplay/defaultshader/Locations}\r\n     */\r\n    this.defaultLocations_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<Array.<?>>}\r\n     */\r\n    this.styles_ = [];\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.styleIndices_ = [];\r\n\r\n    /**\r\n     * @private\r\n     * @type {{strokeColor: (Array.<number>|null),\r\n     *         lineCap: (string|undefined),\r\n     *         lineDash: Array.<number>,\r\n     *         lineDashOffset: (number|undefined),\r\n     *         lineJoin: (string|undefined),\r\n     *         lineWidth: (number|undefined),\r\n     *         miterLimit: (number|undefined),\r\n     *         changed: boolean}|null}\r\n     */\r\n    this.state_ = {\r\n      strokeColor: null,\r\n      lineCap: undefined,\r\n      lineDash: null,\r\n      lineDashOffset: undefined,\r\n      lineJoin: undefined,\r\n      lineWidth: undefined,\r\n      miterLimit: undefined,\r\n      changed: false\r\n    };\r\n\r\n  }\r\n\r\n  /**\r\n   * Draw one segment.\r\n   * @private\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {number} end End.\r\n   * @param {number} stride Stride.\r\n   */\r\n  drawCoordinates_(flatCoordinates, offset, end, stride) {\r\n\r\n    let i, ii;\r\n    let numVertices = this.vertices.length;\r\n    let numIndices = this.indices.length;\r\n    //To save a vertex, the direction of a point is a product of the sign (1 or -1), a prime from\r\n    //Instruction, and a rounding factor (1 or 2). If the product is even,\r\n    //we round it. If it is odd, we don't.\r\n    const lineJoin = this.state_.lineJoin === 'bevel' ? 0 :\r\n      this.state_.lineJoin === 'miter' ? 1 : 2;\r\n    const lineCap = this.state_.lineCap === 'butt' ? 0 :\r\n      this.state_.lineCap === 'square' ? 1 : 2;\r\n    const closed = lineStringIsClosed(flatCoordinates, offset, end, stride);\r\n    let startCoords, sign, n;\r\n    let lastIndex = numIndices;\r\n    let lastSign = 1;\r\n    //We need the adjacent vertices to define normals in joins. p0 = last, p1 = current, p2 = next.\r\n    let p0, p1, p2;\r\n\r\n    for (i = offset, ii = end; i < ii; i += stride) {\r\n\r\n      n = numVertices / 7;\r\n\r\n      p0 = p1;\r\n      p1 = p2 || [flatCoordinates[i], flatCoordinates[i + 1]];\r\n      //First vertex.\r\n      if (i === offset) {\r\n        p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\r\n        if (end - offset === stride * 2 && equals(p1, p2)) {\r\n          break;\r\n        }\r\n        if (closed) {\r\n          //A closed line! Complete the circle.\r\n          p0 = [flatCoordinates[end - stride * 2],\r\n            flatCoordinates[end - stride * 2 + 1]];\r\n\r\n          startCoords = p2;\r\n        } else {\r\n          //Add the first two/four vertices.\r\n\r\n          if (lineCap) {\r\n            numVertices = this.addVertices_([0, 0], p1, p2,\r\n              lastSign * Instruction.BEGIN_LINE_CAP * lineCap, numVertices);\r\n\r\n            numVertices = this.addVertices_([0, 0], p1, p2,\r\n              -lastSign * Instruction.BEGIN_LINE_CAP * lineCap, numVertices);\r\n\r\n            this.indices[numIndices++] = n + 2;\r\n            this.indices[numIndices++] = n;\r\n            this.indices[numIndices++] = n + 1;\r\n\r\n            this.indices[numIndices++] = n + 1;\r\n            this.indices[numIndices++] = n + 3;\r\n            this.indices[numIndices++] = n + 2;\r\n\r\n          }\r\n\r\n          numVertices = this.addVertices_([0, 0], p1, p2,\r\n            lastSign * Instruction.BEGIN_LINE * (lineCap || 1), numVertices);\r\n\r\n          numVertices = this.addVertices_([0, 0], p1, p2,\r\n            -lastSign * Instruction.BEGIN_LINE * (lineCap || 1), numVertices);\r\n\r\n          lastIndex = numVertices / 7 - 1;\r\n\r\n          continue;\r\n        }\r\n      } else if (i === end - stride) {\r\n        //Last vertex.\r\n        if (closed) {\r\n          //Same as the first vertex.\r\n          p2 = startCoords;\r\n          break;\r\n        } else {\r\n          p0 = p0 || [0, 0];\r\n\r\n          numVertices = this.addVertices_(p0, p1, [0, 0],\r\n            lastSign * Instruction.END_LINE * (lineCap || 1), numVertices);\r\n\r\n          numVertices = this.addVertices_(p0, p1, [0, 0],\r\n            -lastSign * Instruction.END_LINE * (lineCap || 1), numVertices);\r\n\r\n          this.indices[numIndices++] = n;\r\n          this.indices[numIndices++] = lastIndex - 1;\r\n          this.indices[numIndices++] = lastIndex;\r\n\r\n          this.indices[numIndices++] = lastIndex;\r\n          this.indices[numIndices++] = n + 1;\r\n          this.indices[numIndices++] = n;\r\n\r\n          if (lineCap) {\r\n            numVertices = this.addVertices_(p0, p1, [0, 0],\r\n              lastSign * Instruction.END_LINE_CAP * lineCap, numVertices);\r\n\r\n            numVertices = this.addVertices_(p0, p1, [0, 0],\r\n              -lastSign * Instruction.END_LINE_CAP * lineCap, numVertices);\r\n\r\n            this.indices[numIndices++] = n + 2;\r\n            this.indices[numIndices++] = n;\r\n            this.indices[numIndices++] = n + 1;\r\n\r\n            this.indices[numIndices++] = n + 1;\r\n            this.indices[numIndices++] = n + 3;\r\n            this.indices[numIndices++] = n + 2;\r\n\r\n          }\r\n\r\n          break;\r\n        }\r\n      } else {\r\n        p2 = [flatCoordinates[i + stride], flatCoordinates[i + stride + 1]];\r\n      }\r\n\r\n      // We group CW and straight lines, thus the not so inituitive CCW checking function.\r\n      sign = triangleIsCounterClockwise(p0[0], p0[1], p1[0], p1[1], p2[0], p2[1])\r\n        ? -1 : 1;\r\n\r\n      numVertices = this.addVertices_(p0, p1, p2,\r\n        sign * Instruction.BEVEL_FIRST * (lineJoin || 1), numVertices);\r\n\r\n      numVertices = this.addVertices_(p0, p1, p2,\r\n        sign * Instruction.BEVEL_SECOND * (lineJoin || 1), numVertices);\r\n\r\n      numVertices = this.addVertices_(p0, p1, p2,\r\n        -sign * Instruction.MITER_BOTTOM * (lineJoin || 1), numVertices);\r\n\r\n      if (i > offset) {\r\n        this.indices[numIndices++] = n;\r\n        this.indices[numIndices++] = lastIndex - 1;\r\n        this.indices[numIndices++] = lastIndex;\r\n\r\n        this.indices[numIndices++] = n + 2;\r\n        this.indices[numIndices++] = n;\r\n        this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\r\n      }\r\n\r\n      this.indices[numIndices++] = n;\r\n      this.indices[numIndices++] = n + 2;\r\n      this.indices[numIndices++] = n + 1;\r\n\r\n      lastIndex = n + 2;\r\n      lastSign = sign;\r\n\r\n      //Add miter\r\n      if (lineJoin) {\r\n        numVertices = this.addVertices_(p0, p1, p2,\r\n          sign * Instruction.MITER_TOP * lineJoin, numVertices);\r\n\r\n        this.indices[numIndices++] = n + 1;\r\n        this.indices[numIndices++] = n + 3;\r\n        this.indices[numIndices++] = n;\r\n      }\r\n    }\r\n\r\n    if (closed) {\r\n      n = n || numVertices / 7;\r\n      sign = linearRingIsClockwise([p0[0], p0[1], p1[0], p1[1], p2[0], p2[1]], 0, 6, 2)\r\n        ? 1 : -1;\r\n\r\n      numVertices = this.addVertices_(p0, p1, p2,\r\n        sign * Instruction.BEVEL_FIRST * (lineJoin || 1), numVertices);\r\n\r\n      numVertices = this.addVertices_(p0, p1, p2,\r\n        -sign * Instruction.MITER_BOTTOM * (lineJoin || 1), numVertices);\r\n\r\n      this.indices[numIndices++] = n;\r\n      this.indices[numIndices++] = lastIndex - 1;\r\n      this.indices[numIndices++] = lastIndex;\r\n\r\n      this.indices[numIndices++] = n + 1;\r\n      this.indices[numIndices++] = n;\r\n      this.indices[numIndices++] = lastSign * sign > 0 ? lastIndex : lastIndex - 1;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} p0 Last coordinates.\r\n   * @param {Array.<number>} p1 Current coordinates.\r\n   * @param {Array.<number>} p2 Next coordinates.\r\n   * @param {number} product Sign, instruction, and rounding product.\r\n   * @param {number} numVertices Vertex counter.\r\n   * @return {number} Vertex counter.\r\n   * @private\r\n   */\r\n  addVertices_(p0, p1, p2, product, numVertices) {\r\n    this.vertices[numVertices++] = p0[0];\r\n    this.vertices[numVertices++] = p0[1];\r\n    this.vertices[numVertices++] = p1[0];\r\n    this.vertices[numVertices++] = p1[1];\r\n    this.vertices[numVertices++] = p2[0];\r\n    this.vertices[numVertices++] = p2[1];\r\n    this.vertices[numVertices++] = product;\r\n\r\n    return numVertices;\r\n  }\r\n\r\n  /**\r\n   * Check if the linestring can be drawn (i. e. valid).\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {number} end End.\r\n   * @param {number} stride Stride.\r\n   * @return {boolean} The linestring can be drawn.\r\n   * @private\r\n   */\r\n  isValid_(flatCoordinates, offset, end, stride) {\r\n    const range = end - offset;\r\n    if (range < stride * 2) {\r\n      return false;\r\n    } else if (range === stride * 2) {\r\n      const firstP = [flatCoordinates[offset], flatCoordinates[offset + 1]];\r\n      const lastP = [flatCoordinates[offset + stride], flatCoordinates[offset + stride + 1]];\r\n      return !equals(firstP, lastP);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  drawLineString(lineStringGeometry, feature) {\r\n    let flatCoordinates = lineStringGeometry.getFlatCoordinates();\r\n    const stride = lineStringGeometry.getStride();\r\n    if (this.isValid_(flatCoordinates, 0, flatCoordinates.length, stride)) {\r\n      flatCoordinates = translate(flatCoordinates, 0, flatCoordinates.length,\r\n        stride, -this.origin[0], -this.origin[1]);\r\n      if (this.state_.changed) {\r\n        this.styleIndices_.push(this.indices.length);\r\n        this.state_.changed = false;\r\n      }\r\n      this.startIndices.push(this.indices.length);\r\n      this.startIndicesFeature.push(feature);\r\n      this.drawCoordinates_(\r\n        flatCoordinates, 0, flatCoordinates.length, stride);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  drawMultiLineString(multiLineStringGeometry, feature) {\r\n    const indexCount = this.indices.length;\r\n    const ends = multiLineStringGeometry.getEnds();\r\n    ends.unshift(0);\r\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\r\n    const stride = multiLineStringGeometry.getStride();\r\n    let i, ii;\r\n    if (ends.length > 1) {\r\n      for (i = 1, ii = ends.length; i < ii; ++i) {\r\n        if (this.isValid_(flatCoordinates, ends[i - 1], ends[i], stride)) {\r\n          const lineString = translate(flatCoordinates, ends[i - 1], ends[i],\r\n            stride, -this.origin[0], -this.origin[1]);\r\n          this.drawCoordinates_(\r\n            lineString, 0, lineString.length, stride);\r\n        }\r\n      }\r\n    }\r\n    if (this.indices.length > indexCount) {\r\n      this.startIndices.push(indexCount);\r\n      this.startIndicesFeature.push(feature);\r\n      if (this.state_.changed) {\r\n        this.styleIndices_.push(indexCount);\r\n        this.state_.changed = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {Array.<Array.<number>>} holeFlatCoordinates Hole flat coordinates.\r\n   * @param {number} stride Stride.\r\n   */\r\n  drawPolygonCoordinates(flatCoordinates, holeFlatCoordinates, stride) {\r\n    if (!lineStringIsClosed(flatCoordinates, 0, flatCoordinates.length, stride)) {\r\n      flatCoordinates.push(flatCoordinates[0]);\r\n      flatCoordinates.push(flatCoordinates[1]);\r\n    }\r\n    this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\r\n    if (holeFlatCoordinates.length) {\r\n      let i, ii;\r\n      for (i = 0, ii = holeFlatCoordinates.length; i < ii; ++i) {\r\n        if (!lineStringIsClosed(holeFlatCoordinates[i], 0, holeFlatCoordinates[i].length, stride)) {\r\n          holeFlatCoordinates[i].push(holeFlatCoordinates[i][0]);\r\n          holeFlatCoordinates[i].push(holeFlatCoordinates[i][1]);\r\n        }\r\n        this.drawCoordinates_(holeFlatCoordinates[i], 0,\r\n          holeFlatCoordinates[i].length, stride);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/Feature|module:ol/render/Feature} feature Feature.\r\n   * @param {number=} opt_index Index count.\r\n   */\r\n  setPolygonStyle(feature, opt_index) {\r\n    const index = opt_index === undefined ? this.indices.length : opt_index;\r\n    this.startIndices.push(index);\r\n    this.startIndicesFeature.push(feature);\r\n    if (this.state_.changed) {\r\n      this.styleIndices_.push(index);\r\n      this.state_.changed = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {number} Current index.\r\n   */\r\n  getCurrentIndex() {\r\n    return this.indices.length;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   **/\r\n  finish(context) {\r\n    // create, bind, and populate the vertices buffer\r\n    this.verticesBuffer = new WebGLBuffer(this.vertices);\r\n\r\n    // create, bind, and populate the indices buffer\r\n    this.indicesBuffer = new WebGLBuffer(this.indices);\r\n\r\n    this.startIndices.push(this.indices.length);\r\n\r\n    //Clean up, if there is nothing to draw\r\n    if (this.styleIndices_.length === 0 && this.styles_.length > 0) {\r\n      this.styles_ = [];\r\n    }\r\n\r\n    this.vertices = null;\r\n    this.indices = null;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  getDeleteResourcesFunction(context) {\r\n    const verticesBuffer = this.verticesBuffer;\r\n    const indicesBuffer = this.indicesBuffer;\r\n    return function() {\r\n      context.deleteBuffer(verticesBuffer);\r\n      context.deleteBuffer(indicesBuffer);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  setUpProgram(gl, context, size, pixelRatio) {\r\n    // get the program\r\n    const program = context.getProgram(fragment, vertex);\r\n\r\n    // get the locations\r\n    let locations;\r\n    if (!this.defaultLocations_) {\r\n      locations = new Locations(gl, program);\r\n      this.defaultLocations_ = locations;\r\n    } else {\r\n      locations = this.defaultLocations_;\r\n    }\r\n\r\n    context.useProgram(program);\r\n\r\n    // enable the vertex attrib arrays\r\n    gl.enableVertexAttribArray(locations.a_lastPos);\r\n    gl.vertexAttribPointer(locations.a_lastPos, 2, FLOAT,\r\n      false, 28, 0);\r\n\r\n    gl.enableVertexAttribArray(locations.a_position);\r\n    gl.vertexAttribPointer(locations.a_position, 2, FLOAT,\r\n      false, 28, 8);\r\n\r\n    gl.enableVertexAttribArray(locations.a_nextPos);\r\n    gl.vertexAttribPointer(locations.a_nextPos, 2, FLOAT,\r\n      false, 28, 16);\r\n\r\n    gl.enableVertexAttribArray(locations.a_direction);\r\n    gl.vertexAttribPointer(locations.a_direction, 1, FLOAT,\r\n      false, 28, 24);\r\n\r\n    // Enable renderer specific uniforms.\r\n    gl.uniform2fv(locations.u_size, size);\r\n    gl.uniform1f(locations.u_pixelRatio, pixelRatio);\r\n\r\n    return locations;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  shutDownProgram(gl, locations) {\r\n    gl.disableVertexAttribArray(locations.a_lastPos);\r\n    gl.disableVertexAttribArray(locations.a_position);\r\n    gl.disableVertexAttribArray(locations.a_nextPos);\r\n    gl.disableVertexAttribArray(locations.a_direction);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  drawReplay(gl, context, skippedFeaturesHash, hitDetection) {\r\n    //Save GL parameters.\r\n    const tmpDepthFunc = /** @type {number} */ (gl.getParameter(gl.DEPTH_FUNC));\r\n    const tmpDepthMask = /** @type {boolean} */ (gl.getParameter(gl.DEPTH_WRITEMASK));\r\n\r\n    if (!hitDetection) {\r\n      gl.enable(gl.DEPTH_TEST);\r\n      gl.depthMask(true);\r\n      gl.depthFunc(gl.NOTEQUAL);\r\n    }\r\n\r\n    if (!isEmpty(skippedFeaturesHash)) {\r\n      this.drawReplaySkipping_(gl, context, skippedFeaturesHash);\r\n    } else {\r\n      //Draw by style groups to minimize drawElements() calls.\r\n      let i, start, end, nextStyle;\r\n      end = this.startIndices[this.startIndices.length - 1];\r\n      for (i = this.styleIndices_.length - 1; i >= 0; --i) {\r\n        start = this.styleIndices_[i];\r\n        nextStyle = this.styles_[i];\r\n        this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\r\n        this.drawElements(gl, context, start, end);\r\n        gl.clear(gl.DEPTH_BUFFER_BIT);\r\n        end = start;\r\n      }\r\n    }\r\n    if (!hitDetection) {\r\n      gl.disable(gl.DEPTH_TEST);\r\n      gl.clear(gl.DEPTH_BUFFER_BIT);\r\n      //Restore GL parameters.\r\n      gl.depthMask(tmpDepthMask);\r\n      gl.depthFunc(tmpDepthFunc);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {WebGLRenderingContext} gl gl.\r\n   * @param {module:ol/webgl/Context} context Context.\r\n   * @param {Object} skippedFeaturesHash Ids of features to skip.\r\n   */\r\n  drawReplaySkipping_(gl, context, skippedFeaturesHash) {\r\n    let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex, featureStart;\r\n    featureIndex = this.startIndices.length - 2;\r\n    end = start = this.startIndices[featureIndex + 1];\r\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\r\n      nextStyle = this.styles_[i];\r\n      this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\r\n      groupStart = this.styleIndices_[i];\r\n\r\n      while (featureIndex >= 0 &&\r\n          this.startIndices[featureIndex] >= groupStart) {\r\n        featureStart = this.startIndices[featureIndex];\r\n        feature = this.startIndicesFeature[featureIndex];\r\n        featureUid = getUid(feature).toString();\r\n\r\n        if (skippedFeaturesHash[featureUid]) {\r\n          if (start !== end) {\r\n            this.drawElements(gl, context, start, end);\r\n            gl.clear(gl.DEPTH_BUFFER_BIT);\r\n          }\r\n          end = featureStart;\r\n        }\r\n        featureIndex--;\r\n        start = featureStart;\r\n      }\r\n      if (start !== end) {\r\n        this.drawElements(gl, context, start, end);\r\n        gl.clear(gl.DEPTH_BUFFER_BIT);\r\n      }\r\n      start = end = groupStart;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  drawHitDetectionReplayOneByOne(gl, context, skippedFeaturesHash, featureCallback, opt_hitExtent) {\r\n    let i, start, end, nextStyle, groupStart, feature, featureUid, featureIndex;\r\n    featureIndex = this.startIndices.length - 2;\r\n    end = this.startIndices[featureIndex + 1];\r\n    for (i = this.styleIndices_.length - 1; i >= 0; --i) {\r\n      nextStyle = this.styles_[i];\r\n      this.setStrokeStyle_(gl, nextStyle[0], nextStyle[1], nextStyle[2]);\r\n      groupStart = this.styleIndices_[i];\r\n\r\n      while (featureIndex >= 0 &&\r\n          this.startIndices[featureIndex] >= groupStart) {\r\n        start = this.startIndices[featureIndex];\r\n        feature = this.startIndicesFeature[featureIndex];\r\n        featureUid = getUid(feature).toString();\r\n\r\n        if (skippedFeaturesHash[featureUid] === undefined &&\r\n            feature.getGeometry() &&\r\n            (opt_hitExtent === undefined || intersects(\r\n              /** @type {Array<number>} */ (opt_hitExtent),\r\n              feature.getGeometry().getExtent()))) {\r\n          gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n          this.drawElements(gl, context, start, end);\r\n\r\n          const result = featureCallback(feature);\r\n\r\n          if (result) {\r\n            return result;\r\n          }\r\n\r\n        }\r\n        featureIndex--;\r\n        end = start;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {WebGLRenderingContext} gl gl.\r\n   * @param {Array.<number>} color Color.\r\n   * @param {number} lineWidth Line width.\r\n   * @param {number} miterLimit Miter limit.\r\n   */\r\n  setStrokeStyle_(gl, color, lineWidth, miterLimit) {\r\n    gl.uniform4fv(this.defaultLocations_.u_color, color);\r\n    gl.uniform1f(this.defaultLocations_.u_lineWidth, lineWidth);\r\n    gl.uniform1f(this.defaultLocations_.u_miterLimit, miterLimit);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  setFillStrokeStyle(fillStyle, strokeStyle) {\r\n    const strokeStyleLineCap = strokeStyle.getLineCap();\r\n    this.state_.lineCap = strokeStyleLineCap !== undefined ?\r\n      strokeStyleLineCap : DEFAULT_LINECAP;\r\n    const strokeStyleLineDash = strokeStyle.getLineDash();\r\n    this.state_.lineDash = strokeStyleLineDash ?\r\n      strokeStyleLineDash : DEFAULT_LINEDASH;\r\n    const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\r\n    this.state_.lineDashOffset = strokeStyleLineDashOffset ?\r\n      strokeStyleLineDashOffset : DEFAULT_LINEDASHOFFSET;\r\n    const strokeStyleLineJoin = strokeStyle.getLineJoin();\r\n    this.state_.lineJoin = strokeStyleLineJoin !== undefined ?\r\n      strokeStyleLineJoin : DEFAULT_LINEJOIN;\r\n    let strokeStyleColor = strokeStyle.getColor();\r\n    if (!(strokeStyleColor instanceof CanvasGradient) &&\r\n        !(strokeStyleColor instanceof CanvasPattern)) {\r\n      strokeStyleColor = asArray(strokeStyleColor).map(function(c, i) {\r\n        return i != 3 ? c / 255 : c;\r\n      }) || DEFAULT_STROKESTYLE;\r\n    } else {\r\n      strokeStyleColor = DEFAULT_STROKESTYLE;\r\n    }\r\n    let strokeStyleWidth = strokeStyle.getWidth();\r\n    strokeStyleWidth = strokeStyleWidth !== undefined ?\r\n      strokeStyleWidth : DEFAULT_LINEWIDTH;\r\n    let strokeStyleMiterLimit = strokeStyle.getMiterLimit();\r\n    strokeStyleMiterLimit = strokeStyleMiterLimit !== undefined ?\r\n      strokeStyleMiterLimit : DEFAULT_MITERLIMIT;\r\n    if (!this.state_.strokeColor || !equals(this.state_.strokeColor, strokeStyleColor) ||\r\n        this.state_.lineWidth !== strokeStyleWidth || this.state_.miterLimit !== strokeStyleMiterLimit) {\r\n      this.state_.changed = true;\r\n      this.state_.strokeColor = strokeStyleColor;\r\n      this.state_.lineWidth = strokeStyleWidth;\r\n      this.state_.miterLimit = strokeStyleMiterLimit;\r\n      this.styles_.push([strokeStyleColor, strokeStyleWidth, strokeStyleMiterLimit]);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default WebGLLineStringReplay;\r\n"],"names":["const","super","let","this"],"mappings":"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"}