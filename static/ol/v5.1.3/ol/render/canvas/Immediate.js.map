{"version":3,"file":"Immediate.js","sources":["../../../../src/ol/render/canvas/Immediate.js"],"sourcesContent":["/**\r\n * @module ol/render/canvas/Immediate\r\n */\r\n// FIXME test, especially polygons with holes and multipolygons\r\n// FIXME need to handle large thick features (where pixel size matters)\r\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\r\n\r\nimport {equals} from '../../array.js';\r\nimport {asColorLike} from '../../colorlike.js';\r\nimport {intersects} from '../../extent.js';\r\nimport GeometryType from '../../geom/GeometryType.js';\r\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\r\nimport {transform2D} from '../../geom/flat/transform.js';\r\nimport {CANVAS_LINE_DASH} from '../../has.js';\r\nimport VectorContext from '../VectorContext.js';\r\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\r\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\r\n\r\n/**\r\n * @classdesc\r\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\r\n * direct rendering of features and geometries to an HTML5 Canvas context.\r\n * Instances of this class are created internally by the library and\r\n * provided to application code as vectorContext member of the\r\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\r\n * render events emitted by layers and maps.\r\n */\r\nclass CanvasImmediateRenderer extends VectorContext {\r\n  /**\r\n   * @param {CanvasRenderingContext2D} context Context.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {module:ol/extent~Extent} extent Extent.\r\n   * @param {module:ol/transform~Transform} transform Transform.\r\n   * @param {number} viewRotation View rotation.\r\n   */\r\n  constructor(context, pixelRatio, extent, transform, viewRotation) {\r\n    super();\r\n\r\n    /**\r\n     * @private\r\n     * @type {CanvasRenderingContext2D}\r\n     */\r\n    this.context_ = context;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.pixelRatio_ = pixelRatio;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/extent~Extent}\r\n     */\r\n    this.extent_ = extent;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/transform~Transform}\r\n     */\r\n    this.transform_ = transform;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.viewRotation_ = viewRotation;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~FillState}\r\n     */\r\n    this.contextFillState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~StrokeState}\r\n     */\r\n    this.contextStrokeState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~TextState}\r\n     */\r\n    this.contextTextState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~FillState}\r\n     */\r\n    this.fillState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~StrokeState}\r\n     */\r\n    this.strokeState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\r\n     */\r\n    this.image_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageAnchorX_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageAnchorY_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageHeight_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageOpacity_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageOriginX_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageOriginY_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.imageRotateWithView_ = false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageRotation_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageScale_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.imageSnapToPixel_ = false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.imageWidth_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.text_ = '';\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textOffsetX_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textOffsetY_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.textRotateWithView_ = false;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textRotation_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textScale_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~FillState}\r\n     */\r\n    this.textFillState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~StrokeState}\r\n     */\r\n    this.textStrokeState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~TextState}\r\n     */\r\n    this.textState_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.pixelCoordinates_ = [];\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/transform~Transform}\r\n     */\r\n    this.tmpLocalTransform_ = createTransform();\r\n\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {number} end End.\r\n   * @param {number} stride Stride.\r\n   * @private\r\n   */\r\n  drawImages_(flatCoordinates, offset, end, stride) {\r\n    if (!this.image_) {\r\n      return;\r\n    }\r\n    const pixelCoordinates = transform2D(\r\n      flatCoordinates, offset, end, 2, this.transform_,\r\n      this.pixelCoordinates_);\r\n    const context = this.context_;\r\n    const localTransform = this.tmpLocalTransform_;\r\n    const alpha = context.globalAlpha;\r\n    if (this.imageOpacity_ != 1) {\r\n      context.globalAlpha = alpha * this.imageOpacity_;\r\n    }\r\n    let rotation = this.imageRotation_;\r\n    if (this.imageRotateWithView_) {\r\n      rotation += this.viewRotation_;\r\n    }\r\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\r\n      let x = pixelCoordinates[i] - this.imageAnchorX_;\r\n      let y = pixelCoordinates[i + 1] - this.imageAnchorY_;\r\n      if (this.imageSnapToPixel_) {\r\n        x = Math.round(x);\r\n        y = Math.round(y);\r\n      }\r\n      if (rotation !== 0 || this.imageScale_ != 1) {\r\n        const centerX = x + this.imageAnchorX_;\r\n        const centerY = y + this.imageAnchorY_;\r\n        composeTransform(localTransform,\r\n          centerX, centerY,\r\n          this.imageScale_, this.imageScale_,\r\n          rotation,\r\n          -centerX, -centerY);\r\n        context.setTransform.apply(context, localTransform);\r\n      }\r\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\r\n        this.imageWidth_, this.imageHeight_, x, y,\r\n        this.imageWidth_, this.imageHeight_);\r\n    }\r\n    if (rotation !== 0 || this.imageScale_ != 1) {\r\n      context.setTransform(1, 0, 0, 1, 0, 0);\r\n    }\r\n    if (this.imageOpacity_ != 1) {\r\n      context.globalAlpha = alpha;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {number} end End.\r\n   * @param {number} stride Stride.\r\n   * @private\r\n   */\r\n  drawText_(flatCoordinates, offset, end, stride) {\r\n    if (!this.textState_ || this.text_ === '') {\r\n      return;\r\n    }\r\n    if (this.textFillState_) {\r\n      this.setContextFillState_(this.textFillState_);\r\n    }\r\n    if (this.textStrokeState_) {\r\n      this.setContextStrokeState_(this.textStrokeState_);\r\n    }\r\n    this.setContextTextState_(this.textState_);\r\n    const pixelCoordinates = transform2D(\r\n      flatCoordinates, offset, end, stride, this.transform_,\r\n      this.pixelCoordinates_);\r\n    const context = this.context_;\r\n    let rotation = this.textRotation_;\r\n    if (this.textRotateWithView_) {\r\n      rotation += this.viewRotation_;\r\n    }\r\n    for (; offset < end; offset += stride) {\r\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\r\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\r\n      if (rotation !== 0 || this.textScale_ != 1) {\r\n        const localTransform = composeTransform(this.tmpLocalTransform_,\r\n          x, y,\r\n          this.textScale_, this.textScale_,\r\n          rotation,\r\n          -x, -y);\r\n        context.setTransform.apply(context, localTransform);\r\n      }\r\n      if (this.textStrokeState_) {\r\n        context.strokeText(this.text_, x, y);\r\n      }\r\n      if (this.textFillState_) {\r\n        context.fillText(this.text_, x, y);\r\n      }\r\n    }\r\n    if (rotation !== 0 || this.textScale_ != 1) {\r\n      context.setTransform(1, 0, 0, 1, 0, 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {number} end End.\r\n   * @param {number} stride Stride.\r\n   * @param {boolean} close Close.\r\n   * @private\r\n   * @return {number} end End.\r\n   */\r\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\r\n    const context = this.context_;\r\n    const pixelCoordinates = transform2D(\r\n      flatCoordinates, offset, end, stride, this.transform_,\r\n      this.pixelCoordinates_);\r\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\r\n    let length = pixelCoordinates.length;\r\n    if (close) {\r\n      length -= 2;\r\n    }\r\n    for (let i = 2; i < length; i += 2) {\r\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\r\n    }\r\n    if (close) {\r\n      context.closePath();\r\n    }\r\n    return end;\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n   * @param {number} offset Offset.\r\n   * @param {Array.<number>} ends Ends.\r\n   * @param {number} stride Stride.\r\n   * @private\r\n   * @return {number} End.\r\n   */\r\n  drawRings_(flatCoordinates, offset, ends, stride) {\r\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\r\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\r\n    }\r\n    return offset;\r\n  }\r\n\r\n  /**\r\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\r\n   * the current fill and stroke styles.\r\n   *\r\n   * @param {module:ol/geom/Circle} geometry Circle geometry.\r\n   * @override\r\n   * @api\r\n   */\r\n  drawCircle(geometry) {\r\n    if (!intersects(this.extent_, geometry.getExtent())) {\r\n      return;\r\n    }\r\n    if (this.fillState_ || this.strokeState_) {\r\n      if (this.fillState_) {\r\n        this.setContextFillState_(this.fillState_);\r\n      }\r\n      if (this.strokeState_) {\r\n        this.setContextStrokeState_(this.strokeState_);\r\n      }\r\n      const pixelCoordinates = transformGeom2D(\r\n        geometry, this.transform_, this.pixelCoordinates_);\r\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\r\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\r\n      const radius = Math.sqrt(dx * dx + dy * dy);\r\n      const context = this.context_;\r\n      context.beginPath();\r\n      context.arc(\r\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\r\n      if (this.fillState_) {\r\n        context.fill();\r\n      }\r\n      if (this.strokeState_) {\r\n        context.stroke();\r\n      }\r\n    }\r\n    if (this.text_ !== '') {\r\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the rendering style.  Note that since this is an immediate rendering API,\r\n   * any `zIndex` on the provided style will be ignored.\r\n   *\r\n   * @param {module:ol/style/Style} style The rendering style.\r\n   * @override\r\n   * @api\r\n   */\r\n  setStyle(style) {\r\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\r\n    this.setImageStyle(style.getImage());\r\n    this.setTextStyle(style.getText());\r\n  }\r\n\r\n  /**\r\n   * Render a geometry into the canvas.  Call\r\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\r\n   *\r\n   * @param {module:ol/geom/Geometry|module:ol/render/Feature} geometry The geometry to render.\r\n   * @override\r\n   * @api\r\n   */\r\n  drawGeometry(geometry) {\r\n    const type = geometry.getType();\r\n    switch (type) {\r\n      case GeometryType.POINT:\r\n        this.drawPoint(/** @type {module:ol/geom/Point} */ (geometry));\r\n        break;\r\n      case GeometryType.LINE_STRING:\r\n        this.drawLineString(/** @type {module:ol/geom/LineString} */ (geometry));\r\n        break;\r\n      case GeometryType.POLYGON:\r\n        this.drawPolygon(/** @type {module:ol/geom/Polygon} */ (geometry));\r\n        break;\r\n      case GeometryType.MULTI_POINT:\r\n        this.drawMultiPoint(/** @type {module:ol/geom/MultiPoint} */ (geometry));\r\n        break;\r\n      case GeometryType.MULTI_LINE_STRING:\r\n        this.drawMultiLineString(/** @type {module:ol/geom/MultiLineString} */ (geometry));\r\n        break;\r\n      case GeometryType.MULTI_POLYGON:\r\n        this.drawMultiPolygon(/** @type {module:ol/geom/MultiPolygon} */ (geometry));\r\n        break;\r\n      case GeometryType.GEOMETRY_COLLECTION:\r\n        this.drawGeometryCollection(/** @type {module:ol/geom/GeometryCollection} */ (geometry));\r\n        break;\r\n      case GeometryType.CIRCLE:\r\n        this.drawCircle(/** @type {module:ol/geom/Circle} */ (geometry));\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\r\n   * style will be ignored - features are rendered immediately in the order that\r\n   * this method is called.  If you need `zIndex` support, you should be using an\r\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\r\n   *\r\n   * @param {module:ol/Feature} feature Feature.\r\n   * @param {module:ol/style/Style} style Style.\r\n   * @override\r\n   * @api\r\n   */\r\n  drawFeature(feature, style) {\r\n    const geometry = style.getGeometryFunction()(feature);\r\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\r\n      return;\r\n    }\r\n    this.setStyle(style);\r\n    this.drawGeometry(geometry);\r\n  }\r\n\r\n  /**\r\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\r\n   * uses the current styles appropriate for each geometry in the collection.\r\n   *\r\n   * @param {module:ol/geom/GeometryCollection} geometry Geometry collection.\r\n   * @override\r\n   */\r\n  drawGeometryCollection(geometry) {\r\n    const geometries = geometry.getGeometriesArray();\r\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\r\n      this.drawGeometry(geometries[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\r\n   * the current style.\r\n   *\r\n   * @param {module:ol/geom/Point|module:ol/render/Feature} geometry Point geometry.\r\n   * @override\r\n   */\r\n  drawPoint(geometry) {\r\n    const flatCoordinates = geometry.getFlatCoordinates();\r\n    const stride = geometry.getStride();\r\n    if (this.image_) {\r\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\r\n    }\r\n    if (this.text_ !== '') {\r\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\r\n   * uses the current style.\r\n   *\r\n   * @param {module:ol/geom/MultiPoint|module:ol/render/Feature} geometry MultiPoint geometry.\r\n   * @override\r\n   */\r\n  drawMultiPoint(geometry) {\r\n    const flatCoordinates = geometry.getFlatCoordinates();\r\n    const stride = geometry.getStride();\r\n    if (this.image_) {\r\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\r\n    }\r\n    if (this.text_ !== '') {\r\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a LineString into the canvas.  Rendering is immediate and uses\r\n   * the current style.\r\n   *\r\n   * @param {module:ol/geom/LineString|module:ol/render/Feature} geometry LineString geometry.\r\n   * @override\r\n   */\r\n  drawLineString(geometry) {\r\n    if (!intersects(this.extent_, geometry.getExtent())) {\r\n      return;\r\n    }\r\n    if (this.strokeState_) {\r\n      this.setContextStrokeState_(this.strokeState_);\r\n      const context = this.context_;\r\n      const flatCoordinates = geometry.getFlatCoordinates();\r\n      context.beginPath();\r\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\r\n        geometry.getStride(), false);\r\n      context.stroke();\r\n    }\r\n    if (this.text_ !== '') {\r\n      const flatMidpoint = geometry.getFlatMidpoint();\r\n      this.drawText_(flatMidpoint, 0, 2, 2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\r\n   * and uses the current style.\r\n   *\r\n   * @param {module:ol/geom/MultiLineString|module:ol/render/Feature} geometry MultiLineString geometry.\r\n   * @override\r\n   */\r\n  drawMultiLineString(geometry) {\r\n    const geometryExtent = geometry.getExtent();\r\n    if (!intersects(this.extent_, geometryExtent)) {\r\n      return;\r\n    }\r\n    if (this.strokeState_) {\r\n      this.setContextStrokeState_(this.strokeState_);\r\n      const context = this.context_;\r\n      const flatCoordinates = geometry.getFlatCoordinates();\r\n      let offset = 0;\r\n      const ends = geometry.getEnds();\r\n      const stride = geometry.getStride();\r\n      context.beginPath();\r\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\r\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\r\n      }\r\n      context.stroke();\r\n    }\r\n    if (this.text_ !== '') {\r\n      const flatMidpoints = geometry.getFlatMidpoints();\r\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\r\n   * the current style.\r\n   *\r\n   * @param {module:ol/geom/Polygon|module:ol/render/Feature} geometry Polygon geometry.\r\n   * @override\r\n   */\r\n  drawPolygon(geometry) {\r\n    if (!intersects(this.extent_, geometry.getExtent())) {\r\n      return;\r\n    }\r\n    if (this.strokeState_ || this.fillState_) {\r\n      if (this.fillState_) {\r\n        this.setContextFillState_(this.fillState_);\r\n      }\r\n      if (this.strokeState_) {\r\n        this.setContextStrokeState_(this.strokeState_);\r\n      }\r\n      const context = this.context_;\r\n      context.beginPath();\r\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\r\n        0, geometry.getEnds(), geometry.getStride());\r\n      if (this.fillState_) {\r\n        context.fill();\r\n      }\r\n      if (this.strokeState_) {\r\n        context.stroke();\r\n      }\r\n    }\r\n    if (this.text_ !== '') {\r\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\r\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\r\n   * uses the current style.\r\n   * @param {module:ol/geom/MultiPolygon} geometry MultiPolygon geometry.\r\n   * @override\r\n   */\r\n  drawMultiPolygon(geometry) {\r\n    if (!intersects(this.extent_, geometry.getExtent())) {\r\n      return;\r\n    }\r\n    if (this.strokeState_ || this.fillState_) {\r\n      if (this.fillState_) {\r\n        this.setContextFillState_(this.fillState_);\r\n      }\r\n      if (this.strokeState_) {\r\n        this.setContextStrokeState_(this.strokeState_);\r\n      }\r\n      const context = this.context_;\r\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\r\n      let offset = 0;\r\n      const endss = geometry.getEndss();\r\n      const stride = geometry.getStride();\r\n      context.beginPath();\r\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\r\n        const ends = endss[i];\r\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\r\n      }\r\n      if (this.fillState_) {\r\n        context.fill();\r\n      }\r\n      if (this.strokeState_) {\r\n        context.stroke();\r\n      }\r\n    }\r\n    if (this.text_ !== '') {\r\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\r\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/render/canvas~FillState} fillState Fill state.\r\n   * @private\r\n   */\r\n  setContextFillState_(fillState) {\r\n    const context = this.context_;\r\n    const contextFillState = this.contextFillState_;\r\n    if (!contextFillState) {\r\n      context.fillStyle = fillState.fillStyle;\r\n      this.contextFillState_ = {\r\n        fillStyle: fillState.fillStyle\r\n      };\r\n    } else {\r\n      if (contextFillState.fillStyle != fillState.fillStyle) {\r\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/render/canvas~StrokeState} strokeState Stroke state.\r\n   * @private\r\n   */\r\n  setContextStrokeState_(strokeState) {\r\n    const context = this.context_;\r\n    const contextStrokeState = this.contextStrokeState_;\r\n    if (!contextStrokeState) {\r\n      context.lineCap = strokeState.lineCap;\r\n      if (CANVAS_LINE_DASH) {\r\n        context.setLineDash(strokeState.lineDash);\r\n        context.lineDashOffset = strokeState.lineDashOffset;\r\n      }\r\n      context.lineJoin = strokeState.lineJoin;\r\n      context.lineWidth = strokeState.lineWidth;\r\n      context.miterLimit = strokeState.miterLimit;\r\n      context.strokeStyle = strokeState.strokeStyle;\r\n      this.contextStrokeState_ = {\r\n        lineCap: strokeState.lineCap,\r\n        lineDash: strokeState.lineDash,\r\n        lineDashOffset: strokeState.lineDashOffset,\r\n        lineJoin: strokeState.lineJoin,\r\n        lineWidth: strokeState.lineWidth,\r\n        miterLimit: strokeState.miterLimit,\r\n        strokeStyle: strokeState.strokeStyle\r\n      };\r\n    } else {\r\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\r\n        contextStrokeState.lineCap = context.lineCap = strokeState.lineCap;\r\n      }\r\n      if (CANVAS_LINE_DASH) {\r\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\r\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\r\n        }\r\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\r\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\r\n              strokeState.lineDashOffset;\r\n        }\r\n      }\r\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\r\n        contextStrokeState.lineJoin = context.lineJoin = strokeState.lineJoin;\r\n      }\r\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\r\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\r\n      }\r\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\r\n        contextStrokeState.miterLimit = context.miterLimit =\r\n            strokeState.miterLimit;\r\n      }\r\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\r\n        contextStrokeState.strokeStyle = context.strokeStyle =\r\n            strokeState.strokeStyle;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/render/canvas~TextState} textState Text state.\r\n   * @private\r\n   */\r\n  setContextTextState_(textState) {\r\n    const context = this.context_;\r\n    const contextTextState = this.contextTextState_;\r\n    const textAlign = textState.textAlign ?\r\n      textState.textAlign : defaultTextAlign;\r\n    if (!contextTextState) {\r\n      context.font = textState.font;\r\n      context.textAlign = textAlign;\r\n      context.textBaseline = textState.textBaseline;\r\n      this.contextTextState_ = {\r\n        font: textState.font,\r\n        textAlign: textAlign,\r\n        textBaseline: textState.textBaseline\r\n      };\r\n    } else {\r\n      if (contextTextState.font != textState.font) {\r\n        contextTextState.font = context.font = textState.font;\r\n      }\r\n      if (contextTextState.textAlign != textAlign) {\r\n        contextTextState.textAlign = context.textAlign = textAlign;\r\n      }\r\n      if (contextTextState.textBaseline != textState.textBaseline) {\r\n        contextTextState.textBaseline = context.textBaseline =\r\n            textState.textBaseline;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the fill and stroke style for subsequent draw operations.  To clear\r\n   * either fill or stroke styles, pass null for the appropriate parameter.\r\n   *\r\n   * @param {module:ol/style/Fill} fillStyle Fill style.\r\n   * @param {module:ol/style/Stroke} strokeStyle Stroke style.\r\n   * @override\r\n   */\r\n  setFillStrokeStyle(fillStyle, strokeStyle) {\r\n    if (!fillStyle) {\r\n      this.fillState_ = null;\r\n    } else {\r\n      const fillStyleColor = fillStyle.getColor();\r\n      this.fillState_ = {\r\n        fillStyle: asColorLike(fillStyleColor ?\r\n          fillStyleColor : defaultFillStyle)\r\n      };\r\n    }\r\n    if (!strokeStyle) {\r\n      this.strokeState_ = null;\r\n    } else {\r\n      const strokeStyleColor = strokeStyle.getColor();\r\n      const strokeStyleLineCap = strokeStyle.getLineCap();\r\n      const strokeStyleLineDash = strokeStyle.getLineDash();\r\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\r\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\r\n      const strokeStyleWidth = strokeStyle.getWidth();\r\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\r\n      this.strokeState_ = {\r\n        lineCap: strokeStyleLineCap !== undefined ?\r\n          strokeStyleLineCap : defaultLineCap,\r\n        lineDash: strokeStyleLineDash ?\r\n          strokeStyleLineDash : defaultLineDash,\r\n        lineDashOffset: strokeStyleLineDashOffset ?\r\n          strokeStyleLineDashOffset : defaultLineDashOffset,\r\n        lineJoin: strokeStyleLineJoin !== undefined ?\r\n          strokeStyleLineJoin : defaultLineJoin,\r\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\r\n          strokeStyleWidth : defaultLineWidth),\r\n        miterLimit: strokeStyleMiterLimit !== undefined ?\r\n          strokeStyleMiterLimit : defaultMiterLimit,\r\n        strokeStyle: asColorLike(strokeStyleColor ?\r\n          strokeStyleColor : defaultStrokeStyle)\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the image style for subsequent draw operations.  Pass null to remove\r\n   * the image style.\r\n   *\r\n   * @param {module:ol/style/Image} imageStyle Image style.\r\n   * @override\r\n   */\r\n  setImageStyle(imageStyle) {\r\n    if (!imageStyle) {\r\n      this.image_ = null;\r\n    } else {\r\n      const imageAnchor = imageStyle.getAnchor();\r\n      // FIXME pixel ratio\r\n      const imageImage = imageStyle.getImage(1);\r\n      const imageOrigin = imageStyle.getOrigin();\r\n      const imageSize = imageStyle.getSize();\r\n      this.imageAnchorX_ = imageAnchor[0];\r\n      this.imageAnchorY_ = imageAnchor[1];\r\n      this.imageHeight_ = imageSize[1];\r\n      this.image_ = imageImage;\r\n      this.imageOpacity_ = imageStyle.getOpacity();\r\n      this.imageOriginX_ = imageOrigin[0];\r\n      this.imageOriginY_ = imageOrigin[1];\r\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\r\n      this.imageRotation_ = imageStyle.getRotation();\r\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\r\n      this.imageSnapToPixel_ = imageStyle.getSnapToPixel();\r\n      this.imageWidth_ = imageSize[0];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the text style for subsequent draw operations.  Pass null to\r\n   * remove the text style.\r\n   *\r\n   * @param {module:ol/style/Text} textStyle Text style.\r\n   * @override\r\n   */\r\n  setTextStyle(textStyle) {\r\n    if (!textStyle) {\r\n      this.text_ = '';\r\n    } else {\r\n      const textFillStyle = textStyle.getFill();\r\n      if (!textFillStyle) {\r\n        this.textFillState_ = null;\r\n      } else {\r\n        const textFillStyleColor = textFillStyle.getColor();\r\n        this.textFillState_ = {\r\n          fillStyle: asColorLike(textFillStyleColor ?\r\n            textFillStyleColor : defaultFillStyle)\r\n        };\r\n      }\r\n      const textStrokeStyle = textStyle.getStroke();\r\n      if (!textStrokeStyle) {\r\n        this.textStrokeState_ = null;\r\n      } else {\r\n        const textStrokeStyleColor = textStrokeStyle.getColor();\r\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\r\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\r\n        const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\r\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\r\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\r\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\r\n        this.textStrokeState_ = {\r\n          lineCap: textStrokeStyleLineCap !== undefined ?\r\n            textStrokeStyleLineCap : defaultLineCap,\r\n          lineDash: textStrokeStyleLineDash ?\r\n            textStrokeStyleLineDash : defaultLineDash,\r\n          lineDashOffset: textStrokeStyleLineDashOffset ?\r\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\r\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\r\n            textStrokeStyleLineJoin : defaultLineJoin,\r\n          lineWidth: textStrokeStyleWidth !== undefined ?\r\n            textStrokeStyleWidth : defaultLineWidth,\r\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\r\n            textStrokeStyleMiterLimit : defaultMiterLimit,\r\n          strokeStyle: asColorLike(textStrokeStyleColor ?\r\n            textStrokeStyleColor : defaultStrokeStyle)\r\n        };\r\n      }\r\n      const textFont = textStyle.getFont();\r\n      const textOffsetX = textStyle.getOffsetX();\r\n      const textOffsetY = textStyle.getOffsetY();\r\n      const textRotateWithView = textStyle.getRotateWithView();\r\n      const textRotation = textStyle.getRotation();\r\n      const textScale = textStyle.getScale();\r\n      const textText = textStyle.getText();\r\n      const textTextAlign = textStyle.getTextAlign();\r\n      const textTextBaseline = textStyle.getTextBaseline();\r\n      this.textState_ = {\r\n        font: textFont !== undefined ?\r\n          textFont : defaultFont,\r\n        textAlign: textTextAlign !== undefined ?\r\n          textTextAlign : defaultTextAlign,\r\n        textBaseline: textTextBaseline !== undefined ?\r\n          textTextBaseline : defaultTextBaseline\r\n      };\r\n      this.text_ = textText !== undefined ? textText : '';\r\n      this.textOffsetX_ =\r\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\r\n      this.textOffsetY_ =\r\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\r\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\r\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\r\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\r\n        textScale : 1);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default CanvasImmediateRenderer;\r\n"],"names":["super","const","let","this"],"mappings":"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"}