{"version":3,"file":"TextReplay.js","sources":["../../../../src/ol/render/canvas/TextReplay.js"],"sourcesContent":["/**\r\n * @module ol/render/canvas/TextReplay\r\n */\r\nimport {getUid} from '../../util.js';\r\nimport {asColorLike} from '../../colorlike.js';\r\nimport {createCanvasContext2D} from '../../dom.js';\r\nimport {intersects} from '../../extent.js';\r\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\r\nimport GeometryType from '../../geom/GeometryType.js';\r\nimport {CANVAS_LINE_DASH} from '../../has.js';\r\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\r\nimport CanvasInstruction from '../canvas/Instruction.js';\r\nimport CanvasReplay from '../canvas/Replay.js';\r\nimport {TEXT_ALIGN} from '../replay.js';\r\nimport TextPlacement from '../../style/TextPlacement.js';\r\n\r\nclass CanvasTextReplay extends CanvasReplay {\r\n  /**\r\n   * @param {number} tolerance Tolerance.\r\n   * @param {module:ol/extent~Extent} maxExtent Maximum extent.\r\n   * @param {number} resolution Resolution.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @param {boolean} overlaps The replay can have overlapping geometries.\r\n   * @param {?} declutterTree Declutter tree.\r\n   */\r\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\r\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/render/canvas~DeclutterGroup}\r\n     */\r\n    this.declutterGroup_;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<HTMLCanvasElement>}\r\n     */\r\n    this.labels_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.text_ = '';\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textOffsetX_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textOffsetY_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean|undefined}\r\n     */\r\n    this.textRotateWithView_ = undefined;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textRotation_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~FillState}\r\n     */\r\n    this.textFillState_ = null;\r\n\r\n    /**\r\n     * @type {!Object.<string, module:ol/render/canvas~FillState>}\r\n     */\r\n    this.fillStates = {};\r\n\r\n    /**\r\n     * @private\r\n     * @type {?module:ol/render/canvas~StrokeState}\r\n     */\r\n    this.textStrokeState_ = null;\r\n\r\n    /**\r\n     * @type {!Object.<string, module:ol/render/canvas~StrokeState>}\r\n     */\r\n    this.strokeStates = {};\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/render/canvas~TextState}\r\n     */\r\n    this.textState_ = /** @type {module:ol/render/canvas~TextState} */ ({});\r\n\r\n    /**\r\n     * @type {!Object.<string, module:ol/render/canvas~TextState>}\r\n     */\r\n    this.textStates = {};\r\n\r\n    /**\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.textKey_ = '';\r\n\r\n    /**\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.fillKey_ = '';\r\n\r\n    /**\r\n     * @private\r\n     * @type {string}\r\n     */\r\n    this.strokeKey_ = '';\r\n\r\n    /**\r\n     * @private\r\n     * @type {Object.<string, Object.<string, number>>}\r\n     */\r\n    this.widths_ = {};\r\n\r\n    labelCache.prune();\r\n\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  drawText(geometry, feature) {\r\n    const fillState = this.textFillState_;\r\n    const strokeState = this.textStrokeState_;\r\n    const textState = this.textState_;\r\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\r\n      return;\r\n    }\r\n\r\n    let begin = this.coordinates.length;\r\n\r\n    const geometryType = geometry.getType();\r\n    let flatCoordinates = null;\r\n    let end = 2;\r\n    let stride = 2;\r\n    let i, ii;\r\n\r\n    if (textState.placement === TextPlacement.LINE) {\r\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\r\n        return;\r\n      }\r\n      let ends;\r\n      flatCoordinates = geometry.getFlatCoordinates();\r\n      stride = geometry.getStride();\r\n      if (geometryType == GeometryType.LINE_STRING) {\r\n        ends = [flatCoordinates.length];\r\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\r\n        ends = geometry.getEnds();\r\n      } else if (geometryType == GeometryType.POLYGON) {\r\n        ends = geometry.getEnds().slice(0, 1);\r\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\r\n        const endss = geometry.getEndss();\r\n        ends = [];\r\n        for (i = 0, ii = endss.length; i < ii; ++i) {\r\n          ends.push(endss[i][0]);\r\n        }\r\n      }\r\n      this.beginGeometry(geometry, feature);\r\n      const textAlign = textState.textAlign;\r\n      let flatOffset = 0;\r\n      let flatEnd;\r\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\r\n        if (textAlign == undefined) {\r\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\r\n          flatOffset = range[0];\r\n          flatEnd = range[1];\r\n        } else {\r\n          flatEnd = ends[o];\r\n        }\r\n        for (i = flatOffset; i < flatEnd; i += stride) {\r\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\r\n        }\r\n        end = this.coordinates.length;\r\n        flatOffset = ends[o];\r\n        this.drawChars_(begin, end, this.declutterGroup_);\r\n        begin = end;\r\n      }\r\n      this.endGeometry(geometry, feature);\r\n\r\n    } else {\r\n      const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\r\n      const width = label.width / this.pixelRatio;\r\n      switch (geometryType) {\r\n        case GeometryType.POINT:\r\n        case GeometryType.MULTI_POINT:\r\n          flatCoordinates = geometry.getFlatCoordinates();\r\n          end = flatCoordinates.length;\r\n          break;\r\n        case GeometryType.LINE_STRING:\r\n          flatCoordinates = /** @type {module:ol/geom/LineString} */ (geometry).getFlatMidpoint();\r\n          break;\r\n        case GeometryType.CIRCLE:\r\n          flatCoordinates = /** @type {module:ol/geom/Circle} */ (geometry).getCenter();\r\n          break;\r\n        case GeometryType.MULTI_LINE_STRING:\r\n          flatCoordinates = /** @type {module:ol/geom/MultiLineString} */ (geometry).getFlatMidpoints();\r\n          end = flatCoordinates.length;\r\n          break;\r\n        case GeometryType.POLYGON:\r\n          flatCoordinates = /** @type {module:ol/geom/Polygon} */ (geometry).getFlatInteriorPoint();\r\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\r\n            return;\r\n          }\r\n          stride = 3;\r\n          break;\r\n        case GeometryType.MULTI_POLYGON:\r\n          const interiorPoints = /** @type {module:ol/geom/MultiPolygon} */ (geometry).getFlatInteriorPoints();\r\n          flatCoordinates = [];\r\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\r\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\r\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\r\n            }\r\n          }\r\n          end = flatCoordinates.length;\r\n          if (end == 0) {\r\n            return;\r\n          }\r\n          break;\r\n        default:\r\n      }\r\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\r\n      if (textState.backgroundFill || textState.backgroundStroke) {\r\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\r\n        if (textState.backgroundFill) {\r\n          this.updateFillStyle(this.state, this.createFill, geometry);\r\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\r\n        }\r\n        if (textState.backgroundStroke) {\r\n          this.updateStrokeStyle(this.state, this.applyStroke);\r\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\r\n        }\r\n      }\r\n      this.beginGeometry(geometry, feature);\r\n      this.drawTextImage_(label, begin, end);\r\n      this.endGeometry(geometry, feature);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {string} text Text.\r\n   * @param {string} textKey Text style key.\r\n   * @param {string} fillKey Fill style key.\r\n   * @param {string} strokeKey Stroke style key.\r\n   * @return {HTMLCanvasElement} Image.\r\n   */\r\n  getImage(text, textKey, fillKey, strokeKey) {\r\n    let label;\r\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\r\n\r\n    if (!labelCache.containsKey(key)) {\r\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\r\n      const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\r\n      const textState = this.textStates[textKey] || this.textState_;\r\n      const pixelRatio = this.pixelRatio;\r\n      const scale = textState.scale * pixelRatio;\r\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\r\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\r\n\r\n      const lines = text.split('\\n');\r\n      const numLines = lines.length;\r\n      const widths = [];\r\n      const width = measureTextWidths(textState.font, lines, widths);\r\n      const lineHeight = measureTextHeight(textState.font);\r\n      const height = lineHeight * numLines;\r\n      const renderWidth = (width + strokeWidth);\r\n      const context = createCanvasContext2D(\r\n        Math.ceil(renderWidth * scale),\r\n        Math.ceil((height + strokeWidth) * scale));\r\n      label = context.canvas;\r\n      labelCache.set(key, label);\r\n      if (scale != 1) {\r\n        context.scale(scale, scale);\r\n      }\r\n      context.font = textState.font;\r\n      if (strokeKey) {\r\n        context.strokeStyle = strokeState.strokeStyle;\r\n        context.lineWidth = strokeWidth;\r\n        context.lineCap = strokeState.lineCap;\r\n        context.lineJoin = strokeState.lineJoin;\r\n        context.miterLimit = strokeState.miterLimit;\r\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\r\n          context.setLineDash(strokeState.lineDash);\r\n          context.lineDashOffset = strokeState.lineDashOffset;\r\n        }\r\n      }\r\n      if (fillKey) {\r\n        context.fillStyle = fillState.fillStyle;\r\n      }\r\n      context.textBaseline = 'middle';\r\n      context.textAlign = 'center';\r\n      const leftRight = (0.5 - align);\r\n      const x = align * label.width / scale + leftRight * strokeWidth;\r\n      let i;\r\n      if (strokeKey) {\r\n        for (i = 0; i < numLines; ++i) {\r\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\r\n        }\r\n      }\r\n      if (fillKey) {\r\n        for (i = 0; i < numLines; ++i) {\r\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\r\n        }\r\n      }\r\n    }\r\n    return labelCache.get(key);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {HTMLCanvasElement} label Label.\r\n   * @param {number} begin Begin.\r\n   * @param {number} end End.\r\n   */\r\n  drawTextImage_(label, begin, end) {\r\n    const textState = this.textState_;\r\n    const strokeState = this.textStrokeState_;\r\n    const pixelRatio = this.pixelRatio;\r\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\r\n    const baseline = TEXT_ALIGN[textState.textBaseline];\r\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\r\n\r\n    const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\r\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\r\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\r\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\r\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\r\n      1, true, label.width,\r\n      textState.padding == defaultPadding ?\r\n        defaultPadding : textState.padding.map(function(p) {\r\n          return p * pixelRatio;\r\n        }),\r\n      !!textState.backgroundFill, !!textState.backgroundStroke\r\n    ]);\r\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\r\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\r\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\r\n      1 / pixelRatio, true, label.width, textState.padding,\r\n      !!textState.backgroundFill, !!textState.backgroundStroke\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {number} begin Begin.\r\n   * @param {number} end End.\r\n   * @param {module:ol/render/canvas~DeclutterGroup} declutterGroup Declutter group.\r\n   */\r\n  drawChars_(begin, end, declutterGroup) {\r\n    const strokeState = this.textStrokeState_;\r\n    const textState = this.textState_;\r\n    const fillState = this.textFillState_;\r\n\r\n    const strokeKey = this.strokeKey_;\r\n    if (strokeState) {\r\n      if (!(strokeKey in this.strokeStates)) {\r\n        this.strokeStates[strokeKey] = /** @type {module:ol/render/canvas~StrokeState} */ ({\r\n          strokeStyle: strokeState.strokeStyle,\r\n          lineCap: strokeState.lineCap,\r\n          lineDashOffset: strokeState.lineDashOffset,\r\n          lineWidth: strokeState.lineWidth,\r\n          lineJoin: strokeState.lineJoin,\r\n          miterLimit: strokeState.miterLimit,\r\n          lineDash: strokeState.lineDash\r\n        });\r\n      }\r\n    }\r\n    const textKey = this.textKey_;\r\n    if (!(this.textKey_ in this.textStates)) {\r\n      this.textStates[this.textKey_] = /** @type {module:ol/render/canvas~TextState} */ ({\r\n        font: textState.font,\r\n        textAlign: textState.textAlign || defaultTextAlign,\r\n        scale: textState.scale\r\n      });\r\n    }\r\n    const fillKey = this.fillKey_;\r\n    if (fillState) {\r\n      if (!(fillKey in this.fillStates)) {\r\n        this.fillStates[fillKey] = /** @type {module:ol/render/canvas~FillState} */ ({\r\n          fillStyle: fillState.fillStyle\r\n        });\r\n      }\r\n    }\r\n\r\n    const pixelRatio = this.pixelRatio;\r\n    const baseline = TEXT_ALIGN[textState.textBaseline];\r\n\r\n    const offsetY = this.textOffsetY_ * pixelRatio;\r\n    const text = this.text_;\r\n    const font = textState.font;\r\n    const textScale = textState.scale;\r\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\r\n    let widths = this.widths_[font];\r\n    if (!widths) {\r\n      this.widths_[font] = widths = {};\r\n    }\r\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\r\n      begin, end, baseline, declutterGroup,\r\n      textState.overflow, fillKey, textState.maxAngle,\r\n      function(text) {\r\n        let width = widths[text];\r\n        if (!width) {\r\n          width = widths[text] = measureTextWidth(font, text);\r\n        }\r\n        return width * textScale * pixelRatio;\r\n      },\r\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\r\n    ]);\r\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\r\n      begin, end, baseline, declutterGroup,\r\n      textState.overflow, fillKey, textState.maxAngle,\r\n      function(text) {\r\n        let width = widths[text];\r\n        if (!width) {\r\n          width = widths[text] = measureTextWidth(font, text);\r\n        }\r\n        return width * textScale;\r\n      },\r\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  setTextStyle(textStyle, declutterGroup) {\r\n    let textState, fillState, strokeState;\r\n    if (!textStyle) {\r\n      this.text_ = '';\r\n    } else {\r\n      this.declutterGroup_ = /** @type {module:ol/render/canvas~DeclutterGroup} */ (declutterGroup);\r\n\r\n      const textFillStyle = textStyle.getFill();\r\n      if (!textFillStyle) {\r\n        fillState = this.textFillState_ = null;\r\n      } else {\r\n        fillState = this.textFillState_;\r\n        if (!fillState) {\r\n          fillState = this.textFillState_ = /** @type {module:ol/render/canvas~FillState} */ ({});\r\n        }\r\n        fillState.fillStyle = asColorLike(\r\n          textFillStyle.getColor() || defaultFillStyle);\r\n      }\r\n\r\n      const textStrokeStyle = textStyle.getStroke();\r\n      if (!textStrokeStyle) {\r\n        strokeState = this.textStrokeState_ = null;\r\n      } else {\r\n        strokeState = this.textStrokeState_;\r\n        if (!strokeState) {\r\n          strokeState = this.textStrokeState_ = /** @type {module:ol/render/canvas~StrokeState} */ ({});\r\n        }\r\n        const lineDash = textStrokeStyle.getLineDash();\r\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\r\n        const lineWidth = textStrokeStyle.getWidth();\r\n        const miterLimit = textStrokeStyle.getMiterLimit();\r\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\r\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\r\n        strokeState.lineDashOffset =\r\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\r\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\r\n        strokeState.lineWidth =\r\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\r\n        strokeState.miterLimit =\r\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\r\n        strokeState.strokeStyle = asColorLike(\r\n          textStrokeStyle.getColor() || defaultStrokeStyle);\r\n      }\r\n\r\n      textState = this.textState_;\r\n      const font = textStyle.getFont() || defaultFont;\r\n      checkFont(font);\r\n      const textScale = textStyle.getScale();\r\n      textState.overflow = textStyle.getOverflow();\r\n      textState.font = font;\r\n      textState.maxAngle = textStyle.getMaxAngle();\r\n      textState.placement = textStyle.getPlacement();\r\n      textState.textAlign = textStyle.getTextAlign();\r\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\r\n      textState.backgroundFill = textStyle.getBackgroundFill();\r\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\r\n      textState.padding = textStyle.getPadding() || defaultPadding;\r\n      textState.scale = textScale === undefined ? 1 : textScale;\r\n\r\n      const textOffsetX = textStyle.getOffsetX();\r\n      const textOffsetY = textStyle.getOffsetY();\r\n      const textRotateWithView = textStyle.getRotateWithView();\r\n      const textRotation = textStyle.getRotation();\r\n      this.text_ = textStyle.getText() || '';\r\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\r\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\r\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\r\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\r\n\r\n      this.strokeKey_ = strokeState ?\r\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\r\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\r\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\r\n        '';\r\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\r\n      this.fillKey_ = fillState ?\r\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\r\n        '';\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {string} font Font to use for measuring.\r\n * @param {Array.<string>} lines Lines to measure.\r\n * @param {Array.<number>} widths Array will be populated with the widths of\r\n * each line.\r\n * @return {number} Width of the whole text.\r\n */\r\nexport function measureTextWidths(font, lines, widths) {\r\n  const numLines = lines.length;\r\n  let width = 0;\r\n  for (let i = 0; i < numLines; ++i) {\r\n    const currentWidth = measureTextWidth(font, lines[i]);\r\n    width = Math.max(width, currentWidth);\r\n    widths.push(currentWidth);\r\n  }\r\n  return width;\r\n}\r\n\r\n\r\nexport default CanvasTextReplay;\r\n"],"names":["super","const","let","this"],"mappings":"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"}