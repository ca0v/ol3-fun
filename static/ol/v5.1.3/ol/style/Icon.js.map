{"version":3,"file":"Icon.js","sources":["../../../src/ol/style/Icon.js"],"sourcesContent":["/**\r\n * @module ol/style/Icon\r\n */\r\nimport {getUid} from '../util.js';\r\nimport ImageState from '../ImageState.js';\r\nimport {assert} from '../asserts.js';\r\nimport {asArray} from '../color.js';\r\nimport {listen, unlisten} from '../events.js';\r\nimport EventType from '../events/EventType.js';\r\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\r\nimport {get as getIconImage} from '../style/IconImage.js';\r\nimport IconOrigin from '../style/IconOrigin.js';\r\nimport ImageStyle from '../style/Image.js';\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {Array.<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\r\n * @property {module:ol/style/IconOrigin} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`. Default is `top-left`.\r\n * @property {module:ol/style/IconAnchorUnits} [anchorXUnits] Units in which the anchor x value is\r\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the x value in pixels. Default is `'fraction'`.\r\n * @property {module:ol/style/IconAnchorUnits} [anchorYUnits] Units in which the anchor y value is\r\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the y value in pixels. Default is `'fraction'`.\r\n * @property {module:ol/color~Color|string} [color] Color to tint the icon. If not specified,\r\n * the icon will be left as is.\r\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\r\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\r\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\r\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\r\n * provided image must already be loaded. And in that case, it is required\r\n * to provide the size of the image, with the `imgSize` option.\r\n * @property {Array.<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\r\n * sub-rectangle to use from the original icon image.\r\n * @property {module:ol/style/IconOrigin} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`. Default is `top-left`.\r\n * @property {number} [opacity=1] Opacity of the icon.\r\n * @property {number} [scale=1] Scale.\r\n * @property {boolean} [snapToPixel=true] If `true` integral numbers of pixels are used as the X and Y pixel coordinate\r\n * when drawing the icon in the output canvas. If `false` fractional numbers may be used. Using `true` allows for\r\n * \"sharp\" rendering (no blur), while using `false` allows for \"accurate\" rendering. Note that accuracy is important if\r\n * the icon's position is animated. Without it, the icon may jitter noticeably.\r\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\r\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\r\n * @property {module:ol/size~Size} [size] Icon size in pixel. Can be used together with `offset` to define the\r\n * sub-rectangle to use from the origin (sprite) icon image.\r\n * @property {module:ol/size~Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\r\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\r\n * @property {string} [src] Image source URI.\r\n */\r\n\r\n\r\n/**\r\n * @classdesc\r\n * Set icon style for vector features.\r\n * @api\r\n */\r\nclass Icon extends ImageStyle {\r\n  /**\r\n   * @param {module:ol/style/Icon~Options=} opt_options Options.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = opt_options || {};\r\n\r\n    /**\r\n     * @type {number}\r\n     */\r\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\r\n\r\n    /**\r\n     * @type {number}\r\n     */\r\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\r\n\r\n    /**\r\n     * @type {number}\r\n     */\r\n    const scale = options.scale !== undefined ? options.scale : 1;\r\n\r\n    /**\r\n     * @type {boolean}\r\n     */\r\n    const rotateWithView = options.rotateWithView !== undefined ?\r\n      options.rotateWithView : false;\r\n\r\n    /**\r\n     * @type {boolean}\r\n     */\r\n    const snapToPixel = options.snapToPixel !== undefined ?\r\n      options.snapToPixel : true;\r\n\r\n    super({\r\n      opacity: opacity,\r\n      rotation: rotation,\r\n      scale: scale,\r\n      snapToPixel: snapToPixel,\r\n      rotateWithView: rotateWithView\r\n    });\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.normalizedAnchor_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/style/IconOrigin}\r\n     */\r\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\r\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/style/IconAnchorUnits}\r\n     */\r\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\r\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/style/IconAnchorUnits}\r\n     */\r\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\r\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\r\n\r\n    /**\r\n     * @private\r\n     * @type {?string}\r\n     */\r\n    this.crossOrigin_ =\r\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\r\n\r\n    /**\r\n     * @type {HTMLImageElement|HTMLCanvasElement}\r\n     */\r\n    const image = options.img !== undefined ? options.img : null;\r\n\r\n    /**\r\n     * @type {module:ol/size~Size}\r\n     */\r\n    const imgSize = options.imgSize !== undefined ? options.imgSize : null;\r\n\r\n    /**\r\n     * @type {string|undefined}\r\n     */\r\n    let src = options.src;\r\n\r\n    assert(!(src !== undefined && image),\r\n      4); // `image` and `src` cannot be provided at the same time\r\n    assert(!image || (image && imgSize),\r\n      5); // `imgSize` must be set when `image` is provided\r\n\r\n    if ((src === undefined || src.length === 0) && image) {\r\n      src = image.src || getUid(image).toString();\r\n    }\r\n    assert(src !== undefined && src.length > 0,\r\n      6); // A defined and non-empty `src` or `image` must be provided\r\n\r\n    /**\r\n     * @type {module:ol/ImageState}\r\n     */\r\n    const imageState = options.src !== undefined ?\r\n      ImageState.IDLE : ImageState.LOADED;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/color~Color}\r\n     */\r\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/style/IconImage}\r\n     */\r\n    this.iconImage_ = getIconImage(\r\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/style/IconOrigin}\r\n     */\r\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\r\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array.<number>}\r\n     */\r\n    this.origin_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/size~Size}\r\n     */\r\n    this.size_ = options.size !== undefined ? options.size : null;\r\n\r\n  }\r\n\r\n  /**\r\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\r\n   * @return {module:ol/style/Icon} The cloned style.\r\n   * @api\r\n   */\r\n  clone() {\r\n    return new Icon({\r\n      anchor: this.anchor_.slice(),\r\n      anchorOrigin: this.anchorOrigin_,\r\n      anchorXUnits: this.anchorXUnits_,\r\n      anchorYUnits: this.anchorYUnits_,\r\n      crossOrigin: this.crossOrigin_,\r\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\r\n      src: this.getSrc(),\r\n      offset: this.offset_.slice(),\r\n      offsetOrigin: this.offsetOrigin_,\r\n      size: this.size_ !== null ? this.size_.slice() : undefined,\r\n      opacity: this.getOpacity(),\r\n      scale: this.getScale(),\r\n      snapToPixel: this.getSnapToPixel(),\r\n      rotation: this.getRotation(),\r\n      rotateWithView: this.getRotateWithView()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * @api\r\n   */\r\n  getAnchor() {\r\n    if (this.normalizedAnchor_) {\r\n      return this.normalizedAnchor_;\r\n    }\r\n    let anchor = this.anchor_;\r\n    const size = this.getSize();\r\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\r\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\r\n      if (!size) {\r\n        return null;\r\n      }\r\n      anchor = this.anchor_.slice();\r\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\r\n        anchor[0] *= size[0];\r\n      }\r\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\r\n        anchor[1] *= size[1];\r\n      }\r\n    }\r\n\r\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\r\n      if (!size) {\r\n        return null;\r\n      }\r\n      if (anchor === this.anchor_) {\r\n        anchor = this.anchor_.slice();\r\n      }\r\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\r\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\r\n        anchor[0] = -anchor[0] + size[0];\r\n      }\r\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\r\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\r\n        anchor[1] = -anchor[1] + size[1];\r\n      }\r\n    }\r\n    this.normalizedAnchor_ = anchor;\r\n    return this.normalizedAnchor_;\r\n  }\r\n\r\n  /**\r\n   * Set the anchor point. The anchor determines the center point for the\r\n   * symbolizer.\r\n   *\r\n   * @param {Array.<number>} anchor Anchor.\r\n   * @api\r\n   */\r\n  setAnchor(anchor) {\r\n    this.anchor_ = anchor;\r\n    this.normalizedAnchor_ = null;\r\n  }\r\n\r\n  /**\r\n   * Get the icon color.\r\n   * @return {module:ol/color~Color} Color.\r\n   * @api\r\n   */\r\n  getColor() {\r\n    return this.color_;\r\n  }\r\n\r\n  /**\r\n   * Get the image icon.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\r\n   * @override\r\n   * @api\r\n   */\r\n  getImage(pixelRatio) {\r\n    return this.iconImage_.getImage(pixelRatio);\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  getImageSize() {\r\n    return this.iconImage_.getSize();\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  getHitDetectionImageSize() {\r\n    return this.getImageSize();\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  getImageState() {\r\n    return this.iconImage_.getImageState();\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  getHitDetectionImage(pixelRatio) {\r\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * @api\r\n   */\r\n  getOrigin() {\r\n    if (this.origin_) {\r\n      return this.origin_;\r\n    }\r\n    let offset = this.offset_;\r\n\r\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\r\n      const size = this.getSize();\r\n      const iconImageSize = this.iconImage_.getSize();\r\n      if (!size || !iconImageSize) {\r\n        return null;\r\n      }\r\n      offset = offset.slice();\r\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\r\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\r\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\r\n      }\r\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\r\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\r\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\r\n      }\r\n    }\r\n    this.origin_ = offset;\r\n    return this.origin_;\r\n  }\r\n\r\n  /**\r\n   * Get the image URL.\r\n   * @return {string|undefined} Image src.\r\n   * @api\r\n   */\r\n  getSrc() {\r\n    return this.iconImage_.getSrc();\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * @api\r\n   */\r\n  getSize() {\r\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  listenImageChange(listener, thisArg) {\r\n    return listen(this.iconImage_, EventType.CHANGE,\r\n      listener, thisArg);\r\n  }\r\n\r\n  /**\r\n   * Load not yet loaded URI.\r\n   * When rendering a feature with an icon style, the vector renderer will\r\n   * automatically call this method. However, you might want to call this\r\n   * method yourself for preloading or other purposes.\r\n   * @override\r\n   * @api\r\n   */\r\n  load() {\r\n    this.iconImage_.load();\r\n  }\r\n\r\n  /**\r\n   * @override\r\n   */\r\n  unlistenImageChange(listener, thisArg) {\r\n    unlisten(this.iconImage_, EventType.CHANGE,\r\n      listener, thisArg);\r\n  }\r\n}\r\n\r\n\r\nexport default Icon;\r\n"],"names":["const","super","let"],"mappings":"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"}