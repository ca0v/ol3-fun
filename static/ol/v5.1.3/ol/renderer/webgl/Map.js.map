{"version":3,"file":"Map.js","sources":["../../../../src/ol/renderer/webgl/Map.js"],"sourcesContent":["/**\r\n * @module ol/renderer/webgl/Map\r\n */\r\n\r\nimport {stableSort} from '../../array.js';\r\nimport {CLASS_UNSELECTABLE} from '../../css.js';\r\nimport {createCanvasContext2D} from '../../dom.js';\r\nimport {listen} from '../../events.js';\r\nimport {visibleAtResolution} from '../../layer/Layer.js';\r\nimport RenderEvent from '../../render/Event.js';\r\nimport RenderEventType from '../../render/EventType.js';\r\nimport WebGLImmediateRenderer from '../../render/webgl/Immediate.js';\r\nimport MapRenderer, {sortByZIndex} from '../Map.js';\r\nimport SourceState from '../../source/State.js';\r\nimport LRUCache from '../../structs/LRUCache.js';\r\nimport PriorityQueue from '../../structs/PriorityQueue.js';\r\nimport {BLEND, CLAMP_TO_EDGE, COLOR_BUFFER_BIT, CULL_FACE, DEPTH_TEST, FRAMEBUFFER,\r\n  getContext, LINEAR, ONE, ONE_MINUS_SRC_ALPHA, RGBA, SCISSOR_TEST, SRC_ALPHA,\r\n  STENCIL_TEST, TEXTURE0, TEXTURE_2D, TEXTURE_MAG_FILTER, TEXTURE_MIN_FILTER,\r\n  TEXTURE_WRAP_S, TEXTURE_WRAP_T, UNSIGNED_BYTE} from '../../webgl.js';\r\nimport WebGLContext from '../../webgl/Context.js';\r\nimport ContextEventType from '../../webgl/ContextEventType.js';\r\n\r\n\r\n/**\r\n * @typedef {Object} TextureCacheEntry\r\n * @property {number} magFilter\r\n * @property {number} minFilter\r\n * @property {WebGLTexture} texture\r\n */\r\n\r\n\r\n/**\r\n * Texture cache high water mark.\r\n * @type {number}\r\n */\r\nconst WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK = 1024;\r\n\r\n\r\n/**\r\n * @classdesc\r\n * WebGL map renderer.\r\n * @api\r\n */\r\nclass WebGLMapRenderer extends MapRenderer {\r\n\r\n  /**\r\n   * @param {module:ol/PluggableMap} map Map.\r\n   */\r\n  constructor(map) {\r\n    super(map);\r\n\r\n    const container = map.getViewport();\r\n\r\n    /**\r\n     * @private\r\n     * @type {HTMLCanvasElement}\r\n     */\r\n    this.canvas_ = /** @type {HTMLCanvasElement} */\r\n      (document.createElement('CANVAS'));\r\n    this.canvas_.style.width = '100%';\r\n    this.canvas_.style.height = '100%';\r\n    this.canvas_.style.display = 'block';\r\n    this.canvas_.className = CLASS_UNSELECTABLE;\r\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.clipTileCanvasWidth_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.clipTileCanvasHeight_ = 0;\r\n\r\n    /**\r\n     * @private\r\n     * @type {CanvasRenderingContext2D}\r\n     */\r\n    this.clipTileContext_ = createCanvasContext2D();\r\n\r\n    /**\r\n     * @private\r\n     * @type {boolean}\r\n     */\r\n    this.renderedVisible_ = true;\r\n\r\n    /**\r\n     * @private\r\n     * @type {WebGLRenderingContext}\r\n     */\r\n    this.gl_ = getContext(this.canvas_, {\r\n      antialias: true,\r\n      depth: true,\r\n      failIfMajorPerformanceCaveat: true,\r\n      preserveDrawingBuffer: false,\r\n      stencil: true\r\n    });\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/webgl/Context}\r\n     */\r\n    this.context_ = new WebGLContext(this.canvas_, this.gl_);\r\n\r\n    listen(this.canvas_, ContextEventType.LOST,\r\n      this.handleWebGLContextLost, this);\r\n    listen(this.canvas_, ContextEventType.RESTORED,\r\n      this.handleWebGLContextRestored, this);\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/structs/LRUCache.<module:ol/renderer/webgl/Map~TextureCacheEntry|null>}\r\n     */\r\n    this.textureCache_ = new LRUCache();\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/coordinate~Coordinate}\r\n     */\r\n    this.focus_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {module:ol/structs/PriorityQueue.<Array>}\r\n     */\r\n    this.tileTextureQueue_ = new PriorityQueue(\r\n      /**\r\n       * @param {Array.<*>} element Element.\r\n       * @return {number} Priority.\r\n       * @this {module:ol/renderer/webgl/Map}\r\n       */\r\n      (function(element) {\r\n        const tileCenter = /** @type {module:ol/coordinate~Coordinate} */ (element[1]);\r\n        const tileResolution = /** @type {number} */ (element[2]);\r\n        const deltaX = tileCenter[0] - this.focus_[0];\r\n        const deltaY = tileCenter[1] - this.focus_[1];\r\n        return 65536 * Math.log(tileResolution) +\r\n              Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\r\n      }).bind(this),\r\n      /**\r\n       * @param {Array.<*>} element Element.\r\n       * @return {string} Key.\r\n       */\r\n      function(element) {\r\n        return (\r\n          /** @type {module:ol/Tile} */ (element[0]).getKey()\r\n        );\r\n      });\r\n\r\n\r\n    /**\r\n     * @param {module:ol/PluggableMap} map Map.\r\n     * @param {?module:ol/PluggableMap~FrameState} frameState Frame state.\r\n     * @return {boolean} false.\r\n     * @this {module:ol/renderer/webgl/Map}\r\n     */\r\n    this.loadNextTileTexture_ =\r\n        function(map, frameState) {\r\n          if (!this.tileTextureQueue_.isEmpty()) {\r\n            this.tileTextureQueue_.reprioritize();\r\n            const element = this.tileTextureQueue_.dequeue();\r\n            const tile = /** @type {module:ol/Tile} */ (element[0]);\r\n            const tileSize = /** @type {module:ol/size~Size} */ (element[3]);\r\n            const tileGutter = /** @type {number} */ (element[4]);\r\n            this.bindTileTexture(\r\n              tile, tileSize, tileGutter, LINEAR, LINEAR);\r\n          }\r\n          return false;\r\n        }.bind(this);\r\n\r\n\r\n    /**\r\n     * @private\r\n     * @type {number}\r\n     */\r\n    this.textureCacheFrameMarkerCount_ = 0;\r\n\r\n    this.initializeGL_();\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/Tile} tile Tile.\r\n   * @param {module:ol/size~Size} tileSize Tile size.\r\n   * @param {number} tileGutter Tile gutter.\r\n   * @param {number} magFilter Mag filter.\r\n   * @param {number} minFilter Min filter.\r\n   */\r\n  bindTileTexture(tile, tileSize, tileGutter, magFilter, minFilter) {\r\n    const gl = this.getGL();\r\n    const tileKey = tile.getKey();\r\n    if (this.textureCache_.containsKey(tileKey)) {\r\n      const textureCacheEntry = this.textureCache_.get(tileKey);\r\n      gl.bindTexture(TEXTURE_2D, textureCacheEntry.texture);\r\n      if (textureCacheEntry.magFilter != magFilter) {\r\n        gl.texParameteri(\r\n          TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\r\n        textureCacheEntry.magFilter = magFilter;\r\n      }\r\n      if (textureCacheEntry.minFilter != minFilter) {\r\n        gl.texParameteri(\r\n          TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\r\n        textureCacheEntry.minFilter = minFilter;\r\n      }\r\n    } else {\r\n      const texture = gl.createTexture();\r\n      gl.bindTexture(TEXTURE_2D, texture);\r\n      if (tileGutter > 0) {\r\n        const clipTileCanvas = this.clipTileContext_.canvas;\r\n        const clipTileContext = this.clipTileContext_;\r\n        if (this.clipTileCanvasWidth_ !== tileSize[0] ||\r\n            this.clipTileCanvasHeight_ !== tileSize[1]) {\r\n          clipTileCanvas.width = tileSize[0];\r\n          clipTileCanvas.height = tileSize[1];\r\n          this.clipTileCanvasWidth_ = tileSize[0];\r\n          this.clipTileCanvasHeight_ = tileSize[1];\r\n        } else {\r\n          clipTileContext.clearRect(0, 0, tileSize[0], tileSize[1]);\r\n        }\r\n        clipTileContext.drawImage(tile.getImage(), tileGutter, tileGutter,\r\n          tileSize[0], tileSize[1], 0, 0, tileSize[0], tileSize[1]);\r\n        gl.texImage2D(TEXTURE_2D, 0,\r\n          RGBA, RGBA,\r\n          UNSIGNED_BYTE, clipTileCanvas);\r\n      } else {\r\n        gl.texImage2D(TEXTURE_2D, 0,\r\n          RGBA, RGBA,\r\n          UNSIGNED_BYTE, tile.getImage());\r\n      }\r\n      gl.texParameteri(\r\n        TEXTURE_2D, TEXTURE_MAG_FILTER, magFilter);\r\n      gl.texParameteri(\r\n        TEXTURE_2D, TEXTURE_MIN_FILTER, minFilter);\r\n      gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_S,\r\n        CLAMP_TO_EDGE);\r\n      gl.texParameteri(TEXTURE_2D, TEXTURE_WRAP_T,\r\n        CLAMP_TO_EDGE);\r\n      this.textureCache_.set(tileKey, {\r\n        texture: texture,\r\n        magFilter: magFilter,\r\n        minFilter: minFilter\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/render/EventType} type Event type.\r\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\r\n   * @private\r\n   */\r\n  dispatchComposeEvent_(type, frameState) {\r\n    const map = this.getMap();\r\n    if (map.hasListener(type)) {\r\n      const context = this.context_;\r\n\r\n      const extent = frameState.extent;\r\n      const size = frameState.size;\r\n      const viewState = frameState.viewState;\r\n      const pixelRatio = frameState.pixelRatio;\r\n\r\n      const resolution = viewState.resolution;\r\n      const center = viewState.center;\r\n      const rotation = viewState.rotation;\r\n\r\n      const vectorContext = new WebGLImmediateRenderer(context,\r\n        center, resolution, rotation, size, extent, pixelRatio);\r\n      const composeEvent = new RenderEvent(type, vectorContext,\r\n        frameState, null, context);\r\n      map.dispatchEvent(composeEvent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  disposeInternal() {\r\n    const gl = this.getGL();\r\n    if (!gl.isContextLost()) {\r\n      this.textureCache_.forEach(\r\n        /**\r\n         * @param {?module:ol/renderer/webgl/Map~TextureCacheEntry} textureCacheEntry\r\n         *     Texture cache entry.\r\n         */\r\n        function(textureCacheEntry) {\r\n          if (textureCacheEntry) {\r\n            gl.deleteTexture(textureCacheEntry.texture);\r\n          }\r\n        });\r\n    }\r\n    this.context_.dispose();\r\n    MapRenderer.prototype.disposeInternal.call(this);\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/PluggableMap} map Map.\r\n   * @param {module:ol/PluggableMap~FrameState} frameState Frame state.\r\n   * @private\r\n   */\r\n  expireCache_(map, frameState) {\r\n    const gl = this.getGL();\r\n    let textureCacheEntry;\r\n    while (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\r\n        WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\r\n      textureCacheEntry = this.textureCache_.peekLast();\r\n      if (!textureCacheEntry) {\r\n        if (+this.textureCache_.peekLastKey() == frameState.index) {\r\n          break;\r\n        } else {\r\n          --this.textureCacheFrameMarkerCount_;\r\n        }\r\n      } else {\r\n        gl.deleteTexture(textureCacheEntry.texture);\r\n      }\r\n      this.textureCache_.pop();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {module:ol/webgl/Context} The context.\r\n   */\r\n  getContext() {\r\n    return this.context_;\r\n  }\r\n\r\n  /**\r\n   * @return {WebGLRenderingContext} GL.\r\n   */\r\n  getGL() {\r\n    return this.gl_;\r\n  }\r\n\r\n  /**\r\n   * @return {module:ol/structs/PriorityQueue.<Array>} Tile texture queue.\r\n   */\r\n  getTileTextureQueue() {\r\n    return this.tileTextureQueue_;\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/events/Event} event Event.\r\n   * @protected\r\n   */\r\n  handleWebGLContextLost(event) {\r\n    event.preventDefault();\r\n    this.textureCache_.clear();\r\n    this.textureCacheFrameMarkerCount_ = 0;\r\n\r\n    const renderers = this.getLayerRenderers();\r\n    for (const id in renderers) {\r\n      const renderer = /** @type {module:ol/renderer/webgl/Layer} */ (renderers[id]);\r\n      renderer.handleWebGLContextLost();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handleWebGLContextRestored() {\r\n    this.initializeGL_();\r\n    this.getMap().render();\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  initializeGL_() {\r\n    const gl = this.gl_;\r\n    gl.activeTexture(TEXTURE0);\r\n    gl.blendFuncSeparate(\r\n      SRC_ALPHA, ONE_MINUS_SRC_ALPHA,\r\n      ONE, ONE_MINUS_SRC_ALPHA);\r\n    gl.disable(CULL_FACE);\r\n    gl.disable(DEPTH_TEST);\r\n    gl.disable(SCISSOR_TEST);\r\n    gl.disable(STENCIL_TEST);\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/Tile} tile Tile.\r\n   * @return {boolean} Is tile texture loaded.\r\n   */\r\n  isTileTextureLoaded(tile) {\r\n    return this.textureCache_.containsKey(tile.getKey());\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  renderFrame(frameState) {\r\n\r\n    const context = this.getContext();\r\n    const gl = this.getGL();\r\n\r\n    if (gl.isContextLost()) {\r\n      return false;\r\n    }\r\n\r\n    if (!frameState) {\r\n      if (this.renderedVisible_) {\r\n        this.canvas_.style.display = 'none';\r\n        this.renderedVisible_ = false;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    this.focus_ = frameState.focus;\r\n\r\n    this.textureCache_.set((-frameState.index).toString(), null);\r\n    ++this.textureCacheFrameMarkerCount_;\r\n\r\n    this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, frameState);\r\n\r\n    /** @type {Array.<module:ol/layer/Layer~State>} */\r\n    const layerStatesToDraw = [];\r\n    const layerStatesArray = frameState.layerStatesArray;\r\n    stableSort(layerStatesArray, sortByZIndex);\r\n\r\n    const viewResolution = frameState.viewState.resolution;\r\n    let i, ii, layerRenderer, layerState;\r\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\r\n      layerState = layerStatesArray[i];\r\n      if (visibleAtResolution(layerState, viewResolution) &&\r\n          layerState.sourceState == SourceState.READY) {\r\n        layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layerState.layer));\r\n        if (layerRenderer.prepareFrame(frameState, layerState, context)) {\r\n          layerStatesToDraw.push(layerState);\r\n        }\r\n      }\r\n    }\r\n\r\n    const width = frameState.size[0] * frameState.pixelRatio;\r\n    const height = frameState.size[1] * frameState.pixelRatio;\r\n    if (this.canvas_.width != width || this.canvas_.height != height) {\r\n      this.canvas_.width = width;\r\n      this.canvas_.height = height;\r\n    }\r\n\r\n    gl.bindFramebuffer(FRAMEBUFFER, null);\r\n\r\n    gl.clearColor(0, 0, 0, 0);\r\n    gl.clear(COLOR_BUFFER_BIT);\r\n    gl.enable(BLEND);\r\n    gl.viewport(0, 0, this.canvas_.width, this.canvas_.height);\r\n\r\n    for (i = 0, ii = layerStatesToDraw.length; i < ii; ++i) {\r\n      layerState = layerStatesToDraw[i];\r\n      layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layerState.layer));\r\n      layerRenderer.composeFrame(frameState, layerState, context);\r\n    }\r\n\r\n    if (!this.renderedVisible_) {\r\n      this.canvas_.style.display = '';\r\n      this.renderedVisible_ = true;\r\n    }\r\n\r\n    this.calculateMatrices2D(frameState);\r\n\r\n    if (this.textureCache_.getCount() - this.textureCacheFrameMarkerCount_ >\r\n        WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK) {\r\n      frameState.postRenderFunctions.push(\r\n        /** @type {module:ol/PluggableMap~PostRenderFunction} */ (this.expireCache_.bind(this))\r\n      );\r\n    }\r\n\r\n    if (!this.tileTextureQueue_.isEmpty()) {\r\n      frameState.postRenderFunctions.push(this.loadNextTileTexture_);\r\n      frameState.animate = true;\r\n    }\r\n\r\n    this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, frameState);\r\n\r\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\r\n    this.scheduleExpireIconCache(frameState);\r\n\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  forEachFeatureAtCoordinate(\r\n    coordinate,\r\n    frameState,\r\n    hitTolerance,\r\n    callback,\r\n    thisArg,\r\n    layerFilter,\r\n    thisArg2\r\n  ) {\r\n    let result;\r\n\r\n    if (this.getGL().isContextLost()) {\r\n      return false;\r\n    }\r\n\r\n    const viewState = frameState.viewState;\r\n\r\n    const layerStates = frameState.layerStatesArray;\r\n    const numLayers = layerStates.length;\r\n    let i;\r\n    for (i = numLayers - 1; i >= 0; --i) {\r\n      const layerState = layerStates[i];\r\n      const layer = layerState.layer;\r\n      if (visibleAtResolution(layerState, viewState.resolution) &&\r\n          layerFilter.call(thisArg2, layer)) {\r\n        const layerRenderer = this.getLayerRenderer(layer);\r\n        result = layerRenderer.forEachFeatureAtCoordinate(\r\n          coordinate, frameState, hitTolerance, callback, thisArg);\r\n        if (result) {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\r\n    let hasFeature = false;\r\n\r\n    if (this.getGL().isContextLost()) {\r\n      return false;\r\n    }\r\n\r\n    const viewState = frameState.viewState;\r\n\r\n    const layerStates = frameState.layerStatesArray;\r\n    const numLayers = layerStates.length;\r\n    let i;\r\n    for (i = numLayers - 1; i >= 0; --i) {\r\n      const layerState = layerStates[i];\r\n      const layer = layerState.layer;\r\n      if (visibleAtResolution(layerState, viewState.resolution) &&\r\n          layerFilter.call(thisArg, layer)) {\r\n        const layerRenderer = this.getLayerRenderer(layer);\r\n        hasFeature =\r\n            layerRenderer.hasFeatureAtCoordinate(coordinate, frameState);\r\n        if (hasFeature) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return hasFeature;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\r\n    if (this.getGL().isContextLost()) {\r\n      return false;\r\n    }\r\n\r\n    const viewState = frameState.viewState;\r\n    let result;\r\n\r\n    const layerStates = frameState.layerStatesArray;\r\n    const numLayers = layerStates.length;\r\n    let i;\r\n    for (i = numLayers - 1; i >= 0; --i) {\r\n      const layerState = layerStates[i];\r\n      const layer = layerState.layer;\r\n      if (visibleAtResolution(layerState, viewState.resolution) &&\r\n          layerFilter.call(thisArg, layer)) {\r\n        const layerRenderer = /** @type {module:ol/renderer/webgl/Layer} */ (this.getLayerRenderer(layer));\r\n        result = layerRenderer.forEachLayerAtPixel(\r\n          pixel, frameState, callback, thisArg);\r\n        if (result) {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\n\r\nexport default WebGLMapRenderer;\r\n"],"names":["const","super","let","this"],"mappings":"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"}