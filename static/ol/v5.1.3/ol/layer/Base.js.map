{"version":3,"file":"Base.js","sources":["../../../src/ol/layer/Base.js"],"sourcesContent":["/**\r\n * @module ol/layer/Base\r\n */\r\nimport BaseObject from '../Object.js';\r\nimport LayerProperty from '../layer/Property.js';\r\nimport {clamp} from '../math.js';\r\nimport {assign} from '../obj.js';\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {number} [opacity=1] Opacity (0, 1).\r\n * @property {boolean} [visible=true] Visibility.\r\n * @property {module:ol/extent~Extent} [extent] The bounding extent for layer rendering.  The layer will not be\r\n * rendered outside of this extent.\r\n * @property {number} [zIndex=0] The z-index for layer rendering.  At rendering time, the layers\r\n * will be ordered, first by Z-index and then by position.\r\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\r\n * visible.\r\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\r\n * be visible.\r\n */\r\n\r\n\r\n/**\r\n * @classdesc\r\n * Abstract base class; normally only used for creating subclasses and not\r\n * instantiated in apps.\r\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\r\n * the options is set as a {@link module:ol/Object} property on the layer object, so\r\n * is observable, and has get/set accessors.\r\n *\r\n * @api\r\n */\r\nclass BaseLayer extends BaseObject {\r\n  /**\r\n   * @param {module:ol/layer/Base~Options} options Layer options.\r\n   */\r\n  constructor(options) {\r\n\r\n    super();\r\n\r\n    /**\r\n    * @type {Object.<string, *>}\r\n    */\r\n    const properties = assign({}, options);\r\n    properties[LayerProperty.OPACITY] =\r\n       options.opacity !== undefined ? options.opacity : 1;\r\n    properties[LayerProperty.VISIBLE] =\r\n       options.visible !== undefined ? options.visible : true;\r\n    properties[LayerProperty.Z_INDEX] =\r\n       options.zIndex !== undefined ? options.zIndex : 0;\r\n    properties[LayerProperty.MAX_RESOLUTION] =\r\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\r\n    properties[LayerProperty.MIN_RESOLUTION] =\r\n       options.minResolution !== undefined ? options.minResolution : 0;\r\n\r\n    this.setProperties(properties);\r\n\r\n    /**\r\n    * @type {module:ol/layer/Layer~State}\r\n    * @private\r\n    */\r\n    this.state_ = /** @type {module:ol/layer/Layer~State} */ ({\r\n      layer: /** @type {module:ol/layer/Layer} */ (this),\r\n      managed: true\r\n    });\r\n\r\n    /**\r\n    * The layer type.\r\n    * @type {module:ol/LayerType}\r\n    * @protected;\r\n    */\r\n    this.type;\r\n\r\n  }\r\n\r\n  /**\r\n  * Get the layer type (used when creating a layer renderer).\r\n  * @return {module:ol/LayerType} The layer type.\r\n  */\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  /**\r\n  * @return {module:ol/layer/Layer~State} Layer state.\r\n  */\r\n  getLayerState() {\r\n    this.state_.opacity = clamp(this.getOpacity(), 0, 1);\r\n    this.state_.sourceState = this.getSourceState();\r\n    this.state_.visible = this.getVisible();\r\n    this.state_.extent = this.getExtent();\r\n    this.state_.zIndex = this.getZIndex();\r\n    this.state_.maxResolution = this.getMaxResolution();\r\n    this.state_.minResolution = Math.max(this.getMinResolution(), 0);\r\n\r\n    return this.state_;\r\n  }\r\n\r\n  /**\r\n  * @abstract\r\n  * @param {Array.<module:ol/layer/Layer>=} opt_array Array of layers (to be\r\n  *     modified in place).\r\n  * @return {Array.<module:ol/layer/Layer>} Array of layers.\r\n  */\r\n  getLayersArray(opt_array) {}\r\n\r\n  /**\r\n  * @abstract\r\n  * @param {Array.<module:ol/layer/Layer~State>=} opt_states Optional list of layer\r\n  *     states (to be modified in place).\r\n  * @return {Array.<module:ol/layer/Layer~State>} List of layer states.\r\n  */\r\n  getLayerStatesArray(opt_states) {}\r\n\r\n  /**\r\n  * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\r\n  * will be visible regardless of extent.\r\n  * @return {module:ol/extent~Extent|undefined} The layer extent.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getExtent() {\r\n    return (\r\n    /** @type {module:ol/extent~Extent|undefined} */ (this.get(LayerProperty.EXTENT))\r\n    );\r\n  }\r\n\r\n  /**\r\n  * Return the maximum resolution of the layer.\r\n  * @return {number} The maximum resolution of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getMaxResolution() {\r\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\r\n  }\r\n\r\n  /**\r\n  * Return the minimum resolution of the layer.\r\n  * @return {number} The minimum resolution of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getMinResolution() {\r\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\r\n  }\r\n\r\n  /**\r\n  * Return the opacity of the layer (between 0 and 1).\r\n  * @return {number} The opacity of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getOpacity() {\r\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\r\n  }\r\n\r\n  /**\r\n  * @abstract\r\n  * @return {module:ol/source/State} Source state.\r\n  */\r\n  getSourceState() {}\r\n\r\n  /**\r\n  * Return the visibility of the layer (`true` or `false`).\r\n  * @return {boolean} The visibility of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getVisible() {\r\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\r\n  }\r\n\r\n  /**\r\n  * Return the Z-index of the layer, which is used to order layers before\r\n  * rendering. The default Z-index is 0.\r\n  * @return {number} The Z-index of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  getZIndex() {\r\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\r\n  }\r\n\r\n  /**\r\n  * Set the extent at which the layer is visible.  If `undefined`, the layer\r\n  * will be visible at all extents.\r\n  * @param {module:ol/extent~Extent|undefined} extent The extent of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setExtent(extent) {\r\n    this.set(LayerProperty.EXTENT, extent);\r\n  }\r\n\r\n  /**\r\n  * Set the maximum resolution at which the layer is visible.\r\n  * @param {number} maxResolution The maximum resolution of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setMaxResolution(maxResolution) {\r\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\r\n  }\r\n\r\n  /**\r\n  * Set the minimum resolution at which the layer is visible.\r\n  * @param {number} minResolution The minimum resolution of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setMinResolution(minResolution) {\r\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\r\n  }\r\n\r\n  /**\r\n  * Set the opacity of the layer, allowed values range from 0 to 1.\r\n  * @param {number} opacity The opacity of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setOpacity(opacity) {\r\n    this.set(LayerProperty.OPACITY, opacity);\r\n  }\r\n\r\n  /**\r\n  * Set the visibility of the layer (`true` or `false`).\r\n  * @param {boolean} visible The visibility of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setVisible(visible) {\r\n    this.set(LayerProperty.VISIBLE, visible);\r\n  }\r\n\r\n  /**\r\n  * Set Z-index of the layer, which is used to order layers before rendering.\r\n  * The default Z-index is 0.\r\n  * @param {number} zindex The z-index of the layer.\r\n  * @observable\r\n  * @api\r\n  */\r\n  setZIndex(zindex) {\r\n    this.set(LayerProperty.Z_INDEX, zindex);\r\n  }\r\n}\r\n\r\n\r\nexport default BaseLayer;\r\n"],"names":["super","const"],"mappings":"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"}