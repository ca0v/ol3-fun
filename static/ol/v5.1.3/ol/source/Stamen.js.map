{"version":3,"file":"Stamen.js","sources":["../../../src/ol/source/Stamen.js"],"sourcesContent":["/**\r\n * @module ol/source/Stamen\r\n */\r\n\r\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from '../source/OSM.js';\r\nimport XYZ from '../source/XYZ.js';\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Array.<string>}\r\n */\r\nconst ATTRIBUTIONS = [\r\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\r\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\r\n        ' 3.0</a>.',\r\n  OSM_ATTRIBUTION\r\n];\r\n\r\n\r\n/**\r\n * @type {Object.<string, {extension: string, opaque: boolean}>}\r\n */\r\nconst LayerConfig = {\r\n  'terrain': {\r\n    extension: 'jpg',\r\n    opaque: true\r\n  },\r\n  'terrain-background': {\r\n    extension: 'jpg',\r\n    opaque: true\r\n  },\r\n  'terrain-labels': {\r\n    extension: 'png',\r\n    opaque: false\r\n  },\r\n  'terrain-lines': {\r\n    extension: 'png',\r\n    opaque: false\r\n  },\r\n  'toner-background': {\r\n    extension: 'png',\r\n    opaque: true\r\n  },\r\n  'toner': {\r\n    extension: 'png',\r\n    opaque: true\r\n  },\r\n  'toner-hybrid': {\r\n    extension: 'png',\r\n    opaque: false\r\n  },\r\n  'toner-labels': {\r\n    extension: 'png',\r\n    opaque: false\r\n  },\r\n  'toner-lines': {\r\n    extension: 'png',\r\n    opaque: false\r\n  },\r\n  'toner-lite': {\r\n    extension: 'png',\r\n    opaque: true\r\n  },\r\n  'watercolor': {\r\n    extension: 'jpg',\r\n    opaque: true\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @type {Object.<string, {minZoom: number, maxZoom: number}>}\r\n */\r\nconst ProviderConfig = {\r\n  'terrain': {\r\n    minZoom: 4,\r\n    maxZoom: 18\r\n  },\r\n  'toner': {\r\n    minZoom: 0,\r\n    maxZoom: 20\r\n  },\r\n  'watercolor': {\r\n    minZoom: 1,\r\n    maxZoom: 16\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {number} [cacheSize=2048] Cache size.\r\n * @property {string} [layer] Layer.\r\n * @property {number} [minZoom] Minimum zoom.\r\n * @property {number} [maxZoom] Maximum zoom.\r\n * @property {boolean} [opaque] Whether the layer is opaque.\r\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\r\n * Higher values can increase reprojection performance, but decrease precision.\r\n * @property {module:ol/Tile~LoadFunction} [tileLoadFunction]\r\n * Optional function to load a tile given a URL. The default is\r\n * ```js\r\n * function(imageTile, src) {\r\n *   imageTile.getImage().src = src;\r\n * };\r\n * ```\r\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\r\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\r\n */\r\n\r\n\r\n/**\r\n * @classdesc\r\n * Layer source for the Stamen tile server.\r\n * @api\r\n */\r\nclass Stamen extends XYZ {\r\n  /**\r\n   * @param {module:ol/source/Stamen~Options=} options Stamen options.\r\n   */\r\n  constructor(options) {\r\n    const i = options.layer.indexOf('-');\r\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\r\n    const providerConfig = ProviderConfig[provider];\r\n\r\n    const layerConfig = LayerConfig[options.layer];\r\n\r\n    const url = options.url !== undefined ? options.url :\r\n      'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\r\n        '/{z}/{x}/{y}.' + layerConfig.extension;\r\n\r\n    super({\r\n      attributions: ATTRIBUTIONS,\r\n      cacheSize: options.cacheSize,\r\n      crossOrigin: 'anonymous',\r\n      maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\r\n      minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\r\n      opaque: layerConfig.opaque,\r\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\r\n      tileLoadFunction: options.tileLoadFunction,\r\n      url: url,\r\n      wrapX: options.wrapX\r\n    });\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default Stamen;\r\n"],"names":["const","super"],"mappings":"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"}