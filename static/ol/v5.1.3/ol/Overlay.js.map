{"version":3,"file":"Overlay.js","sources":["../../src/ol/Overlay.js"],"sourcesContent":["/**\r\n * @module ol/Overlay\r\n */\r\nimport MapEventType from './MapEventType.js';\r\nimport BaseObject, {getChangeEventType} from './Object.js';\r\nimport OverlayPositioning from './OverlayPositioning.js';\r\nimport {CLASS_SELECTABLE} from './css.js';\r\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\r\nimport {listen, unlistenByKey} from './events.js';\r\nimport {containsExtent} from './extent.js';\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\r\n * with the {@link module:ol/Map~Map#getOverlayById} method.\r\n * @property {HTMLElement} [element] The overlay element.\r\n * @property {Array.<number>} [offset=[0, 0]] Offsets in pixels used when positioning\r\n * the overlay. The first element in the\r\n * array is the horizontal offset. A positive value shifts the overlay right.\r\n * The second element in the array is the vertical offset. A positive value\r\n * shifts the overlay down.\r\n * @property {module:ol/coordinate~Coordinate} [position] The overlay position\r\n * in map projection.\r\n * @property {module:ol/OverlayPositioning} [positioning='top-left'] Defines how\r\n * the overlay is actually positioned with respect to its `position` property.\r\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\r\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\r\n * `'top-center'`, and `'top-right'`.\r\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\r\n * viewport should be stopped. If `true` the overlay is placed in the same\r\n * container as that of the controls (CSS class name\r\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\r\n * with CSS class name specified by the `className` property.\r\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\r\n * in the overlay container, or appended. If the overlay is placed in the same\r\n * container as that of the controls (see the `stopEvent` option) you will\r\n * probably set `insertFirst` to `true` so the overlay is displayed below the\r\n * controls.\r\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\r\n * calling `setPosition`, so that the overlay is entirely visible in the current\r\n * viewport.\r\n * @property {module:ol/Overlay~PanOptions} [autoPanAnimation] The\r\n * animation options used to pan the overlay into view. This animation is only\r\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\r\n * customize the animation.\r\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\r\n * overlay and the borders of the map when autopanning.\r\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\r\n * name.\r\n */\r\n\r\n\r\n/**\r\n * @typedef {Object} PanOptions\r\n * @property {number} [duration=1000] The duration of the animation in\r\n * milliseconds.\r\n * @property {function(number):number} [easing] The easing function to use. Can\r\n * be one from {@link module:ol/easing} or a custom function.\r\n * Default is {@link module:ol/easing~inAndOut}.\r\n */\r\n\r\n\r\n/**\r\n * @enum {string}\r\n * @protected\r\n */\r\nconst Property = {\r\n  ELEMENT: 'element',\r\n  MAP: 'map',\r\n  OFFSET: 'offset',\r\n  POSITION: 'position',\r\n  POSITIONING: 'positioning'\r\n};\r\n\r\n\r\n/**\r\n * @classdesc\r\n * An element to be displayed over the map and attached to a single map\r\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\r\n * visible widgets. Unlike Controls, they are not in a fixed position on the\r\n * screen, but are tied to a geographical coordinate, so panning the map will\r\n * move an Overlay but not a Control.\r\n *\r\n * Example:\r\n *\r\n *     import Overlay from 'ol/Overlay';\r\n *\r\n *     var popup = new Overlay({\r\n *       element: document.getElementById('popup')\r\n *     });\r\n *     popup.setPosition(coordinate);\r\n *     map.addOverlay(popup);\r\n *\r\n * @api\r\n */\r\nclass Overlay extends BaseObject {\r\n\r\n  /**\r\n   * @param {module:ol/Overlay~Options} options Overlay options.\r\n   */\r\n  constructor(options) {\r\n\r\n    super();\r\n\r\n    /**\r\n     * @protected\r\n     * @type {module:ol/Overlay~Options}\r\n     */\r\n    this.options = options;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {number|string|undefined}\r\n     */\r\n    this.id = options.id;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {boolean}\r\n     */\r\n    this.insertFirst = options.insertFirst !== undefined ?\r\n      options.insertFirst : true;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {boolean}\r\n     */\r\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {HTMLElement}\r\n     */\r\n    this.element = document.createElement('DIV');\r\n    this.element.className = options.className !== undefined ?\r\n      options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\r\n    this.element.style.position = 'absolute';\r\n\r\n    /**\r\n     * @protected\r\n     * @type {boolean}\r\n     */\r\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {module:ol/Overlay~PanOptions}\r\n     */\r\n    this.autoPanAnimation = options.autoPanAnimation || /** @type {module:ol/Overlay~PanOptions} */ ({});\r\n\r\n    /**\r\n     * @protected\r\n     * @type {number}\r\n     */\r\n    this.autoPanMargin = options.autoPanMargin !== undefined ?\r\n      options.autoPanMargin : 20;\r\n\r\n    /**\r\n     * @protected\r\n     * @type {{bottom_: string,\r\n     *         left_: string,\r\n     *         right_: string,\r\n     *         top_: string,\r\n     *         visible: boolean}}\r\n     */\r\n    this.rendered = {\r\n      bottom_: '',\r\n      left_: '',\r\n      right_: '',\r\n      top_: '',\r\n      visible: true\r\n    };\r\n\r\n    /**\r\n     * @protected\r\n     * @type {?module:ol/events~EventsKey}\r\n     */\r\n    this.mapPostrenderListenerKey = null;\r\n\r\n    listen(\r\n      this, getChangeEventType(Property.ELEMENT),\r\n      this.handleElementChanged, this);\r\n\r\n    listen(\r\n      this, getChangeEventType(Property.MAP),\r\n      this.handleMapChanged, this);\r\n\r\n    listen(\r\n      this, getChangeEventType(Property.OFFSET),\r\n      this.handleOffsetChanged, this);\r\n\r\n    listen(\r\n      this, getChangeEventType(Property.POSITION),\r\n      this.handlePositionChanged, this);\r\n\r\n    listen(\r\n      this, getChangeEventType(Property.POSITIONING),\r\n      this.handlePositioningChanged, this);\r\n\r\n    if (options.element !== undefined) {\r\n      this.setElement(options.element);\r\n    }\r\n\r\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\r\n\r\n    this.setPositioning(options.positioning !== undefined ?\r\n      /** @type {module:ol/OverlayPositioning} */ (options.positioning) :\r\n      OverlayPositioning.TOP_LEFT);\r\n\r\n    if (options.position !== undefined) {\r\n      this.setPosition(options.position);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Get the DOM element of this overlay.\r\n   * @return {HTMLElement|undefined} The Element containing the overlay.\r\n   * @observable\r\n   * @api\r\n   */\r\n  getElement() {\r\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\r\n  }\r\n\r\n  /**\r\n   * Get the overlay identifier which is set on constructor.\r\n   * @return {number|string|undefined} Id.\r\n   * @api\r\n   */\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Get the map associated with this overlay.\r\n   * @return {module:ol/PluggableMap|undefined} The map that the\r\n   * overlay is part of.\r\n   * @observable\r\n   * @api\r\n   */\r\n  getMap() {\r\n    return (\r\n      /** @type {module:ol/PluggableMap|undefined} */ (this.get(Property.MAP))\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the offset of this overlay.\r\n   * @return {Array.<number>} The offset.\r\n   * @observable\r\n   * @api\r\n   */\r\n  getOffset() {\r\n    return /** @type {Array.<number>} */ (this.get(Property.OFFSET));\r\n  }\r\n\r\n  /**\r\n   * Get the current position of this overlay.\r\n   * @return {module:ol/coordinate~Coordinate|undefined} The spatial point that the overlay is\r\n   *     anchored at.\r\n   * @observable\r\n   * @api\r\n   */\r\n  getPosition() {\r\n    return (\r\n      /** @type {module:ol/coordinate~Coordinate|undefined} */ (this.get(Property.POSITION))\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the current positioning of this overlay.\r\n   * @return {module:ol/OverlayPositioning} How the overlay is positioned\r\n   *     relative to its point on the map.\r\n   * @observable\r\n   * @api\r\n   */\r\n  getPositioning() {\r\n    return (\r\n      /** @type {module:ol/OverlayPositioning} */ (this.get(Property.POSITIONING))\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handleElementChanged() {\r\n    removeChildren(this.element);\r\n    const element = this.getElement();\r\n    if (element) {\r\n      this.element.appendChild(element);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handleMapChanged() {\r\n    if (this.mapPostrenderListenerKey) {\r\n      removeNode(this.element);\r\n      unlistenByKey(this.mapPostrenderListenerKey);\r\n      this.mapPostrenderListenerKey = null;\r\n    }\r\n    const map = this.getMap();\r\n    if (map) {\r\n      this.mapPostrenderListenerKey = listen(map,\r\n        MapEventType.POSTRENDER, this.render, this);\r\n      this.updatePixelPosition();\r\n      const container = this.stopEvent ?\r\n        map.getOverlayContainerStopEvent() : map.getOverlayContainer();\r\n      if (this.insertFirst) {\r\n        container.insertBefore(this.element, container.childNodes[0] || null);\r\n      } else {\r\n        container.appendChild(this.element);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  render() {\r\n    this.updatePixelPosition();\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handleOffsetChanged() {\r\n    this.updatePixelPosition();\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handlePositionChanged() {\r\n    this.updatePixelPosition();\r\n    if (this.get(Property.POSITION) && this.autoPan) {\r\n      this.panIntoView();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   */\r\n  handlePositioningChanged() {\r\n    this.updatePixelPosition();\r\n  }\r\n\r\n  /**\r\n   * Set the DOM element to be associated with this overlay.\r\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\r\n   * @observable\r\n   * @api\r\n   */\r\n  setElement(element) {\r\n    this.set(Property.ELEMENT, element);\r\n  }\r\n\r\n  /**\r\n   * Set the map to be associated with this overlay.\r\n   * @param {module:ol/PluggableMap|undefined} map The map that the\r\n   * overlay is part of.\r\n   * @observable\r\n   * @api\r\n   */\r\n  setMap(map) {\r\n    this.set(Property.MAP, map);\r\n  }\r\n\r\n  /**\r\n   * Set the offset for this overlay.\r\n   * @param {Array.<number>} offset Offset.\r\n   * @observable\r\n   * @api\r\n   */\r\n  setOffset(offset) {\r\n    this.set(Property.OFFSET, offset);\r\n  }\r\n\r\n  /**\r\n   * Set the position for this overlay. If the position is `undefined` the\r\n   * overlay is hidden.\r\n   * @param {module:ol/coordinate~Coordinate|undefined} position The spatial point that the overlay\r\n   *     is anchored at.\r\n   * @observable\r\n   * @api\r\n   */\r\n  setPosition(position) {\r\n    this.set(Property.POSITION, position);\r\n  }\r\n\r\n  /**\r\n   * Pan the map so that the overlay is entirely visible in the current viewport\r\n   * (if necessary).\r\n   * @protected\r\n   */\r\n  panIntoView() {\r\n    const map = this.getMap();\r\n\r\n    if (!map || !map.getTargetElement()) {\r\n      return;\r\n    }\r\n\r\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\r\n    const element = this.getElement();\r\n    const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\r\n\r\n    const margin = this.autoPanMargin;\r\n    if (!containsExtent(mapRect, overlayRect)) {\r\n      // the overlay is not completely inside the viewport, so pan the map\r\n      const offsetLeft = overlayRect[0] - mapRect[0];\r\n      const offsetRight = mapRect[2] - overlayRect[2];\r\n      const offsetTop = overlayRect[1] - mapRect[1];\r\n      const offsetBottom = mapRect[3] - overlayRect[3];\r\n\r\n      const delta = [0, 0];\r\n      if (offsetLeft < 0) {\r\n        // move map to the left\r\n        delta[0] = offsetLeft - margin;\r\n      } else if (offsetRight < 0) {\r\n        // move map to the right\r\n        delta[0] = Math.abs(offsetRight) + margin;\r\n      }\r\n      if (offsetTop < 0) {\r\n        // move map up\r\n        delta[1] = offsetTop - margin;\r\n      } else if (offsetBottom < 0) {\r\n        // move map down\r\n        delta[1] = Math.abs(offsetBottom) + margin;\r\n      }\r\n\r\n      if (delta[0] !== 0 || delta[1] !== 0) {\r\n        const center = /** @type {module:ol/coordinate~Coordinate} */ (map.getView().getCenter());\r\n        const centerPx = map.getPixelFromCoordinate(center);\r\n        const newCenterPx = [\r\n          centerPx[0] + delta[0],\r\n          centerPx[1] + delta[1]\r\n        ];\r\n\r\n        map.getView().animate({\r\n          center: map.getCoordinateFromPixel(newCenterPx),\r\n          duration: this.autoPanAnimation.duration,\r\n          easing: this.autoPanAnimation.easing\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the extent of an element relative to the document\r\n   * @param {HTMLElement|undefined} element The element.\r\n   * @param {module:ol/size~Size|undefined} size The size of the element.\r\n   * @return {module:ol/extent~Extent} The extent.\r\n   * @protected\r\n   */\r\n  getRect(element, size) {\r\n    const box = element.getBoundingClientRect();\r\n    const offsetX = box.left + window.pageXOffset;\r\n    const offsetY = box.top + window.pageYOffset;\r\n    return [\r\n      offsetX,\r\n      offsetY,\r\n      offsetX + size[0],\r\n      offsetY + size[1]\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Set the positioning for this overlay.\r\n   * @param {module:ol/OverlayPositioning} positioning how the overlay is\r\n   *     positioned relative to its point on the map.\r\n   * @observable\r\n   * @api\r\n   */\r\n  setPositioning(positioning) {\r\n    this.set(Property.POSITIONING, positioning);\r\n  }\r\n\r\n  /**\r\n   * Modify the visibility of the element.\r\n   * @param {boolean} visible Element visibility.\r\n   * @protected\r\n   */\r\n  setVisible(visible) {\r\n    if (this.rendered.visible !== visible) {\r\n      this.element.style.display = visible ? '' : 'none';\r\n      this.rendered.visible = visible;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update pixel position.\r\n   * @protected\r\n   */\r\n  updatePixelPosition() {\r\n    const map = this.getMap();\r\n    const position = this.getPosition();\r\n    if (!map || !map.isRendered() || !position) {\r\n      this.setVisible(false);\r\n      return;\r\n    }\r\n\r\n    const pixel = map.getPixelFromCoordinate(position);\r\n    const mapSize = map.getSize();\r\n    this.updateRenderedPosition(pixel, mapSize);\r\n  }\r\n\r\n  /**\r\n   * @param {module:ol/pixel~Pixel} pixel The pixel location.\r\n   * @param {module:ol/size~Size|undefined} mapSize The map size.\r\n   * @protected\r\n   */\r\n  updateRenderedPosition(pixel, mapSize) {\r\n    const style = this.element.style;\r\n    const offset = this.getOffset();\r\n\r\n    const positioning = this.getPositioning();\r\n\r\n    this.setVisible(true);\r\n\r\n    let offsetX = offset[0];\r\n    let offsetY = offset[1];\r\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\r\n        positioning == OverlayPositioning.CENTER_RIGHT ||\r\n        positioning == OverlayPositioning.TOP_RIGHT) {\r\n      if (this.rendered.left_ !== '') {\r\n        this.rendered.left_ = style.left = '';\r\n      }\r\n      const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\r\n      if (this.rendered.right_ != right) {\r\n        this.rendered.right_ = style.right = right;\r\n      }\r\n    } else {\r\n      if (this.rendered.right_ !== '') {\r\n        this.rendered.right_ = style.right = '';\r\n      }\r\n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\r\n          positioning == OverlayPositioning.CENTER_CENTER ||\r\n          positioning == OverlayPositioning.TOP_CENTER) {\r\n        offsetX -= this.element.offsetWidth / 2;\r\n      }\r\n      const left = Math.round(pixel[0] + offsetX) + 'px';\r\n      if (this.rendered.left_ != left) {\r\n        this.rendered.left_ = style.left = left;\r\n      }\r\n    }\r\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\r\n        positioning == OverlayPositioning.BOTTOM_CENTER ||\r\n        positioning == OverlayPositioning.BOTTOM_RIGHT) {\r\n      if (this.rendered.top_ !== '') {\r\n        this.rendered.top_ = style.top = '';\r\n      }\r\n      const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\r\n      if (this.rendered.bottom_ != bottom) {\r\n        this.rendered.bottom_ = style.bottom = bottom;\r\n      }\r\n    } else {\r\n      if (this.rendered.bottom_ !== '') {\r\n        this.rendered.bottom_ = style.bottom = '';\r\n      }\r\n      if (positioning == OverlayPositioning.CENTER_LEFT ||\r\n          positioning == OverlayPositioning.CENTER_CENTER ||\r\n          positioning == OverlayPositioning.CENTER_RIGHT) {\r\n        offsetY -= this.element.offsetHeight / 2;\r\n      }\r\n      const top = Math.round(pixel[1] + offsetY) + 'px';\r\n      if (this.rendered.top_ != top) {\r\n        this.rendered.top_ = style.top = top;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * returns the options this Overlay has been created with\r\n   * @return {module:ol/Overlay~Options} overlay options\r\n   */\r\n  getOptions() {\r\n    return this.options;\r\n  }\r\n}\r\n\r\n\r\nexport default Overlay;\r\n"],"names":["const","super","let"],"mappings":"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"}