{"version":3,"file":"GML2.js","sources":["../../../src/ol/format/GML2.js"],"sourcesContent":["/**\r\n * @module ol/format/GML2\r\n */\r\nimport {createOrUpdate} from '../extent.js';\r\nimport {transformWithOptions} from '../format/Feature.js';\r\nimport GMLBase, {GMLNS} from '../format/GMLBase.js';\r\nimport {writeStringTextNode} from '../format/xsd.js';\r\nimport Geometry from '../geom/Geometry.js';\r\nimport {assign} from '../obj.js';\r\nimport {get as getProjection, transformExtent} from '../proj.js';\r\nimport {createElementNS, getAllTextContent, makeArrayPusher, makeChildAppender,\r\n  makeReplacer, makeSimpleNodeFactory, OBJECT_PROPERTY_NODE_FACTORY, pushParseAndPop, pushSerializeAndPop} from '../xml.js';\r\n\r\n\r\n/**\r\n * @const\r\n * @type {string}\r\n */\r\nconst schemaLocation = GMLNS + ' http://schemas.opengis.net/gml/2.1.2/feature.xsd';\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, string>}\r\n */\r\nconst MULTIGEOMETRY_TO_MEMBER_NODENAME = {\r\n  'MultiLineString': 'lineStringMember',\r\n  'MultiCurve': 'curveMember',\r\n  'MultiPolygon': 'polygonMember',\r\n  'MultiSurface': 'surfaceMember'\r\n};\r\n\r\n\r\n/**\r\n * @classdesc\r\n * Feature format for reading and writing data in the GML format,\r\n * version 2.1.2.\r\n *\r\n * @api\r\n */\r\nclass GML2 extends GMLBase {\r\n\r\n  /**\r\n   * @param {module:ol/format/GMLBase~Options=} opt_options Optional configuration object.\r\n   */\r\n  constructor(opt_options) {\r\n    const options = /** @type {module:ol/format/GMLBase~Options} */\r\n        (opt_options ? opt_options : {});\r\n\r\n    super(options);\r\n\r\n    this.FEATURE_COLLECTION_PARSERS[GMLNS][\r\n      'featureMember'] =\r\n        makeArrayPusher(this.readFeaturesInternal);\r\n\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    this.schemaLocation = options.schemaLocation ?\r\n      options.schemaLocation : schemaLocation;\r\n\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @private\r\n   * @return {Array.<number>|undefined} Flat coordinates.\r\n   */\r\n  readFlatCoordinates_(node, objectStack) {\r\n    const s = getAllTextContent(node, false).replace(/^\\s*|\\s*$/g, '');\r\n    const context = /** @type {module:ol/xml~NodeStackItem} */ (objectStack[0]);\r\n    const containerSrs = context['srsName'];\r\n    let axisOrientation = 'enu';\r\n    if (containerSrs) {\r\n      const proj = getProjection(containerSrs);\r\n      if (proj) {\r\n        axisOrientation = proj.getAxisOrientation();\r\n      }\r\n    }\r\n    const coordsGroups = s.trim().split(/\\s+/);\r\n    const flatCoordinates = [];\r\n    for (let i = 0, ii = coordsGroups.length; i < ii; i++) {\r\n      const coords = coordsGroups[i].split(/,+/);\r\n      const x = parseFloat(coords[0]);\r\n      const y = parseFloat(coords[1]);\r\n      const z = (coords.length === 3) ? parseFloat(coords[2]) : 0;\r\n      if (axisOrientation.substr(0, 2) === 'en') {\r\n        flatCoordinates.push(x, y, z);\r\n      } else {\r\n        flatCoordinates.push(y, x, z);\r\n      }\r\n    }\r\n    return flatCoordinates;\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @private\r\n   * @return {module:ol/extent~Extent|undefined} Envelope.\r\n   */\r\n  readBox_(node, objectStack) {\r\n    /** @type {Array.<number>} */\r\n    const flatCoordinates = pushParseAndPop([null],\r\n      this.BOX_PARSERS_, node, objectStack, this);\r\n    return createOrUpdate(flatCoordinates[1][0],\r\n      flatCoordinates[1][1], flatCoordinates[1][3],\r\n      flatCoordinates[1][4]);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @private\r\n   */\r\n  innerBoundaryIsParser_(node, objectStack) {\r\n    /** @type {Array.<number>|undefined} */\r\n    const flatLinearRing = pushParseAndPop(undefined,\r\n      this.RING_PARSERS, node, objectStack, this);\r\n    if (flatLinearRing) {\r\n      const flatLinearRings = /** @type {Array.<Array.<number>>} */\r\n          (objectStack[objectStack.length - 1]);\r\n      flatLinearRings.push(flatLinearRing);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @private\r\n   */\r\n  outerBoundaryIsParser_(node, objectStack) {\r\n    /** @type {Array.<number>|undefined} */\r\n    const flatLinearRing = pushParseAndPop(undefined,\r\n      this.RING_PARSERS, node, objectStack, this);\r\n    if (flatLinearRing) {\r\n      const flatLinearRings = /** @type {Array.<Array.<number>>} */\r\n          (objectStack[objectStack.length - 1]);\r\n      flatLinearRings[0] = flatLinearRing;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @const\r\n   * @param {*} value Value.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @param {string=} opt_nodeName Node name.\r\n   * @return {Node|undefined} Node.\r\n   * @private\r\n   */\r\n  GEOMETRY_NODE_FACTORY_(value, objectStack, opt_nodeName) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const multiSurface = context['multiSurface'];\r\n    const surface = context['surface'];\r\n    const multiCurve = context['multiCurve'];\r\n    let nodeName;\r\n    if (!Array.isArray(value)) {\r\n      nodeName = /** @type {module:ol/geom/Geometry} */ (value).getType();\r\n      if (nodeName === 'MultiPolygon' && multiSurface === true) {\r\n        nodeName = 'MultiSurface';\r\n      } else if (nodeName === 'Polygon' && surface === true) {\r\n        nodeName = 'Surface';\r\n      } else if (nodeName === 'MultiLineString' && multiCurve === true) {\r\n        nodeName = 'MultiCurve';\r\n      }\r\n    } else {\r\n      nodeName = 'Envelope';\r\n    }\r\n    return createElementNS('http://www.opengis.net/gml',\r\n      nodeName);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/Feature} feature Feature.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   */\r\n  writeFeatureElement(node, feature, objectStack) {\r\n    const fid = feature.getId();\r\n    if (fid) {\r\n      node.setAttribute('fid', fid);\r\n    }\r\n    const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\r\n    const featureNS = context['featureNS'];\r\n    const geometryName = feature.getGeometryName();\r\n    if (!context.serializers) {\r\n      context.serializers = {};\r\n      context.serializers[featureNS] = {};\r\n    }\r\n    const properties = feature.getProperties();\r\n    const keys = [];\r\n    const values = [];\r\n    for (const key in properties) {\r\n      const value = properties[key];\r\n      if (value !== null) {\r\n        keys.push(key);\r\n        values.push(value);\r\n        if (key == geometryName || value instanceof Geometry) {\r\n          if (!(key in context.serializers[featureNS])) {\r\n            context.serializers[featureNS][key] = makeChildAppender(\r\n              this.writeGeometryElement, this);\r\n          }\r\n        } else {\r\n          if (!(key in context.serializers[featureNS])) {\r\n            context.serializers[featureNS][key] = makeChildAppender(writeStringTextNode);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const item = assign({}, context);\r\n    item.node = node;\r\n    pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\r\n      (item), context.serializers,\r\n      makeSimpleNodeFactory(undefined, featureNS),\r\n      values,\r\n      objectStack, keys);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LineString} geometry LineString geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeCurveOrLineString_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const srsName = context['srsName'];\r\n    if (node.nodeName !== 'LineStringSegment' && srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    if (node.nodeName === 'LineString' ||\r\n        node.nodeName === 'LineStringSegment') {\r\n      const coordinates = this.createCoordinatesNode_(node.namespaceURI);\r\n      node.appendChild(coordinates);\r\n      this.writeCoordinates_(coordinates, geometry, objectStack);\r\n    } else if (node.nodeName === 'Curve') {\r\n      const segments = createElementNS(node.namespaceURI, 'segments');\r\n      node.appendChild(segments);\r\n      this.writeCurveSegments_(segments,\r\n        geometry, objectStack);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LineString} line LineString geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeLineStringOrCurveMember_(node, line, objectStack) {\r\n    const child = this.GEOMETRY_NODE_FACTORY_(line, objectStack);\r\n    if (child) {\r\n      node.appendChild(child);\r\n      this.writeCurveOrLineString_(child, line, objectStack);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/MultiLineString} geometry MultiLineString geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeMultiCurveOrLineString_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    const curve = context['curve'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const lines = geometry.getLineStrings();\r\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, curve: curve},\r\n      this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,\r\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, lines,\r\n      objectStack, undefined, this);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Geometry|module:ol/extent~Extent} geometry Geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   */\r\n  writeGeometryElement(node, geometry, objectStack) {\r\n    const context = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[objectStack.length - 1]);\r\n    const item = assign({}, context);\r\n    item.node = node;\r\n    let value;\r\n    if (Array.isArray(geometry)) {\r\n      if (context.dataProjection) {\r\n        value = transformExtent(\r\n          geometry, context.featureProjection, context.dataProjection);\r\n      } else {\r\n        value = geometry;\r\n      }\r\n    } else {\r\n      value = transformWithOptions(/** @type {module:ol/geom/Geometry} */ (geometry), true, context);\r\n    }\r\n    pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\r\n      (item), this.GEOMETRY_SERIALIZERS_,\r\n      this.GEOMETRY_NODE_FACTORY_, [value],\r\n      objectStack, undefined, this);\r\n  }\r\n\r\n  /**\r\n   * @param {string} namespaceURI XML namespace.\r\n   * @returns {Node} coordinates node.\r\n   * @private\r\n   */\r\n  createCoordinatesNode_(namespaceURI) {\r\n    const coordinates = createElementNS(namespaceURI, 'coordinates');\r\n    coordinates.setAttribute('decimal', '.');\r\n    coordinates.setAttribute('cs', ',');\r\n    coordinates.setAttribute('ts', ' ');\r\n\r\n    return coordinates;\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LineString|module:ol/geom/LinearRing} value Geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeCoordinates_(node, value, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    // only 2d for simple features profile\r\n    const points = value.getCoordinates();\r\n    const len = points.length;\r\n    const parts = new Array(len);\r\n    for (let i = 0; i < len; ++i) {\r\n      const point = points[i];\r\n      parts[i] = this.getCoords_(point, srsName, hasZ);\r\n    }\r\n    writeStringTextNode(node, parts.join(' '));\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LineString} line LineString geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeCurveSegments_(node, line, objectStack) {\r\n    const child = createElementNS(node.namespaceURI, 'LineStringSegment');\r\n    node.appendChild(child);\r\n    this.writeCurveOrLineString_(child, line, objectStack);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Polygon} geometry Polygon geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeSurfaceOrPolygon_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    if (node.nodeName !== 'PolygonPatch' && srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    if (node.nodeName === 'Polygon' || node.nodeName === 'PolygonPatch') {\r\n      const rings = geometry.getLinearRings();\r\n      pushSerializeAndPop(\r\n        {node: node, hasZ: hasZ, srsName: srsName},\r\n        this.RING_SERIALIZERS_,\r\n        this.RING_NODE_FACTORY_,\r\n        rings, objectStack, undefined, this);\r\n    } else if (node.nodeName === 'Surface') {\r\n      const patches = createElementNS(node.namespaceURI, 'patches');\r\n      node.appendChild(patches);\r\n      this.writeSurfacePatches_(\r\n        patches, geometry, objectStack);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {*} value Value.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @param {string=} opt_nodeName Node name.\r\n   * @return {Node} Node.\r\n   * @private\r\n   */\r\n  RING_NODE_FACTORY_(value, objectStack, opt_nodeName) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const parentNode = context.node;\r\n    const exteriorWritten = context['exteriorWritten'];\r\n    if (exteriorWritten === undefined) {\r\n      context['exteriorWritten'] = true;\r\n    }\r\n    return createElementNS(parentNode.namespaceURI,\r\n      exteriorWritten !== undefined ? 'innerBoundaryIs' : 'outerBoundaryIs');\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Polygon} polygon Polygon geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeSurfacePatches_(node, polygon, objectStack) {\r\n    const child = createElementNS(node.namespaceURI, 'PolygonPatch');\r\n    node.appendChild(child);\r\n    this.writeSurfaceOrPolygon_(child, polygon, objectStack);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LinearRing} ring LinearRing geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeRing_(node, ring, objectStack) {\r\n    const linearRing = createElementNS(node.namespaceURI, 'LinearRing');\r\n    node.appendChild(linearRing);\r\n    this.writeLinearRing_(linearRing, ring, objectStack);\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<number>} point Point geometry.\r\n   * @param {string=} opt_srsName Optional srsName\r\n   * @param {boolean=} opt_hasZ whether the geometry has a Z coordinate (is 3D) or not.\r\n   * @return {string} The coords string.\r\n   * @private\r\n   */\r\n  getCoords_(point, opt_srsName, opt_hasZ) {\r\n    let axisOrientation = 'enu';\r\n    if (opt_srsName) {\r\n      axisOrientation = getProjection(opt_srsName).getAxisOrientation();\r\n    }\r\n    let coords = ((axisOrientation.substr(0, 2) === 'en') ?\r\n      point[0] + ',' + point[1] :\r\n      point[1] + ',' + point[0]);\r\n    if (opt_hasZ) {\r\n      // For newly created points, Z can be undefined.\r\n      const z = point[2] || 0;\r\n      coords += ',' + z;\r\n    }\r\n\r\n    return coords;\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Point} geometry Point geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writePoint_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const coordinates = this.createCoordinatesNode_(node.namespaceURI);\r\n    node.appendChild(coordinates);\r\n    const point = geometry.getCoordinates();\r\n    const coord = this.getCoords_(point, srsName, hasZ);\r\n    writeStringTextNode(coordinates, coord);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/MultiPoint} geometry MultiPoint geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeMultiPoint_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const points = geometry.getPoints();\r\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName},\r\n      this.POINTMEMBER_SERIALIZERS_,\r\n      makeSimpleNodeFactory('pointMember'), points,\r\n      objectStack, undefined, this);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Point} point Point geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writePointMember_(node, point, objectStack) {\r\n    const child = createElementNS(node.namespaceURI, 'Point');\r\n    node.appendChild(child);\r\n    this.writePoint_(child, point, objectStack);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/LinearRing} geometry LinearRing geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeLinearRing_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const srsName = context['srsName'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const coordinates = this.createCoordinatesNode_(node.namespaceURI);\r\n    node.appendChild(coordinates);\r\n    this.writeCoordinates_(coordinates, geometry, objectStack);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/MultiPolygon} geometry MultiPolygon geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeMultiSurfaceOrPolygon_(node, geometry, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const hasZ = context['hasZ'];\r\n    const srsName = context['srsName'];\r\n    const surface = context['surface'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const polygons = geometry.getPolygons();\r\n    pushSerializeAndPop({node: node, hasZ: hasZ, srsName: srsName, surface: surface},\r\n      this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,\r\n      this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_, polygons,\r\n      objectStack, undefined, this);\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/geom/Polygon} polygon Polygon geometry.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeSurfaceOrPolygonMember_(node, polygon, objectStack) {\r\n    const child = this.GEOMETRY_NODE_FACTORY_(\r\n      polygon, objectStack);\r\n    if (child) {\r\n      node.appendChild(child);\r\n      this.writeSurfaceOrPolygon_(child, polygon, objectStack);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Node} node Node.\r\n   * @param {module:ol/extent~Extent} extent Extent.\r\n   * @param {Array.<*>} objectStack Node stack.\r\n   * @private\r\n   */\r\n  writeEnvelope(node, extent, objectStack) {\r\n    const context = objectStack[objectStack.length - 1];\r\n    const srsName = context['srsName'];\r\n    if (srsName) {\r\n      node.setAttribute('srsName', srsName);\r\n    }\r\n    const keys = ['lowerCorner', 'upperCorner'];\r\n    const values = [extent[0] + ' ' + extent[1], extent[2] + ' ' + extent[3]];\r\n    pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\r\n      ({node: node}), this.ENVELOPE_SERIALIZERS_,\r\n      OBJECT_PROPERTY_NODE_FACTORY,\r\n      values,\r\n      objectStack, keys, this);\r\n  }\r\n\r\n  /**\r\n   * @const\r\n   * @param {*} value Value.\r\n   * @param {Array.<*>} objectStack Object stack.\r\n   * @param {string=} opt_nodeName Node name.\r\n   * @return {Node|undefined} Node.\r\n   * @private\r\n   */\r\n  MULTIGEOMETRY_MEMBER_NODE_FACTORY_(value, objectStack, opt_nodeName) {\r\n    const parentNode = objectStack[objectStack.length - 1].node;\r\n    return createElementNS('http://www.opengis.net/gml',\r\n      MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName]);\r\n  }\r\n}\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n * @private\r\n */\r\nGML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates_)\r\n  }\r\n};\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n * @private\r\n */\r\nGML2.prototype.FLAT_LINEAR_RINGS_PARSERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'innerBoundaryIs': GML2.prototype.innerBoundaryIsParser_,\r\n    'outerBoundaryIs': GML2.prototype.outerBoundaryIsParser_\r\n  }\r\n};\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n * @private\r\n */\r\nGML2.prototype.BOX_PARSERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'coordinates': makeArrayPusher(\r\n      GML2.prototype.readFlatCoordinates_)\r\n  }\r\n};\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n * @private\r\n */\r\nGML2.prototype.GEOMETRY_PARSERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\r\n    'MultiPoint': makeReplacer(\r\n      GMLBase.prototype.readMultiPoint),\r\n    'LineString': makeReplacer(\r\n      GMLBase.prototype.readLineString),\r\n    'MultiLineString': makeReplacer(\r\n      GMLBase.prototype.readMultiLineString),\r\n    'LinearRing': makeReplacer(\r\n      GMLBase.prototype.readLinearRing),\r\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\r\n    'MultiPolygon': makeReplacer(\r\n      GMLBase.prototype.readMultiPolygon),\r\n    'Box': makeReplacer(GML2.prototype.readBox_)\r\n  }\r\n};\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.GEOMETRY_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'Curve': makeChildAppender(\r\n      GML2.prototype.writeCurveOrLineString_),\r\n    'MultiCurve': makeChildAppender(\r\n      GML2.prototype.writeMultiCurveOrLineString_),\r\n    'Point': makeChildAppender(GML2.prototype.writePoint_),\r\n    'MultiPoint': makeChildAppender(\r\n      GML2.prototype.writeMultiPoint_),\r\n    'LineString': makeChildAppender(\r\n      GML2.prototype.writeCurveOrLineString_),\r\n    'MultiLineString': makeChildAppender(\r\n      GML2.prototype.writeMultiCurveOrLineString_),\r\n    'LinearRing': makeChildAppender(\r\n      GML2.prototype.writeLinearRing_),\r\n    'Polygon': makeChildAppender(\r\n      GML2.prototype.writeSurfaceOrPolygon_),\r\n    'MultiPolygon': makeChildAppender(\r\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\r\n    'Surface': makeChildAppender(\r\n      GML2.prototype.writeSurfaceOrPolygon_),\r\n    'MultiSurface': makeChildAppender(\r\n      GML2.prototype.writeMultiSurfaceOrPolygon_),\r\n    'Envelope': makeChildAppender(\r\n      GML2.prototype.writeEnvelope)\r\n  }\r\n};\r\n\r\n/**\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'lineStringMember': makeChildAppender(\r\n      GML2.prototype.writeLineStringOrCurveMember_),\r\n    'curveMember': makeChildAppender(\r\n      GML2.prototype.writeLineStringOrCurveMember_)\r\n  }\r\n};\r\n\r\n/**\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.RING_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'outerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_),\r\n    'innerBoundaryIs': makeChildAppender(GML2.prototype.writeRing_)\r\n  }\r\n};\r\n\r\n/**\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.POINTMEMBER_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'pointMember': makeChildAppender(\r\n      GML2.prototype.writePointMember_)\r\n  }\r\n};\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'surfaceMember': makeChildAppender(\r\n      GML2.prototype.writeSurfaceOrPolygonMember_),\r\n    'polygonMember': makeChildAppender(\r\n      GML2.prototype.writeSurfaceOrPolygonMember_)\r\n  }\r\n};\r\n\r\n/**\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n * @private\r\n */\r\nGML2.prototype.ENVELOPE_SERIALIZERS_ = {\r\n  'http://www.opengis.net/gml': {\r\n    'lowerCorner': makeChildAppender(writeStringTextNode),\r\n    'upperCorner': makeChildAppender(writeStringTextNode)\r\n  }\r\n};\r\n\r\nexport default GML2;\r\n"],"names":["const","super","let","this"],"mappings":"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"}