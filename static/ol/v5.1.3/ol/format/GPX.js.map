{"version":3,"file":"GPX.js","sources":["../../../src/ol/format/GPX.js"],"sourcesContent":["/**\r\n * @module ol/format/GPX\r\n */\r\nimport Feature from '../Feature.js';\r\nimport {includes} from '../array.js';\r\nimport {transformWithOptions} from '../format/Feature.js';\r\nimport XMLFeature from '../format/XMLFeature.js';\r\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from '../format/xsd.js';\r\nimport GeometryLayout from '../geom/GeometryLayout.js';\r\nimport LineString from '../geom/LineString.js';\r\nimport MultiLineString from '../geom/MultiLineString.js';\r\nimport Point from '../geom/Point.js';\r\nimport {get as getProjection} from '../proj.js';\r\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\r\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\r\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\r\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Array.<null|string>}\r\n */\r\nconst NAMESPACE_URIS = [\r\n  null,\r\n  'http://www.topografix.com/GPX/1/0',\r\n  'http://www.topografix.com/GPX/1/1'\r\n];\r\n\r\n\r\n/**\r\n * @const\r\n * @type {string}\r\n */\r\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\r\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, function(Node, Array.<*>): (module:ol/Feature|undefined)>}\r\n */\r\nconst FEATURE_READER = {\r\n  'rte': readRte,\r\n  'trk': readTrk,\r\n  'wpt': readWpt\r\n};\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst GPX_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'rte': makeArrayPusher(readRte),\r\n    'trk': makeArrayPusher(readTrk),\r\n    'wpt': makeArrayPusher(readWpt)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst LINK_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'text': makeObjectPropertySetter(readString, 'linkText'),\r\n    'type': makeObjectPropertySetter(readString, 'linkType')\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst GPX_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'rte': makeChildAppender(writeRte),\r\n    'trk': makeChildAppender(writeTrk),\r\n    'wpt': makeChildAppender(writeWpt)\r\n  });\r\n\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {function(module:ol/Feature, Node)} [readExtensions] Callback function\r\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\r\n * not store any references to the node. Note that the `extensions`\r\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\r\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\r\n * directly mapped to a feature.\r\n */\r\n\r\n/**\r\n * @typedef {Object} LayoutOptions\r\n * @property {boolean} [hasZ]\r\n * @property {boolean} [hasM]\r\n */\r\n\r\n/**\r\n * @classdesc\r\n * Feature format for reading and writing data in the GPX format.\r\n *\r\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\r\n * feature of the source.\r\n *\r\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\r\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\r\n * waypoints are ignored.\r\n *\r\n * When writing, LineString geometries are output as routes (`<rte>`), and\r\n * MultiLineString as tracks (`<trk>`).\r\n *\r\n * @api\r\n */\r\nclass GPX extends XMLFeature {\r\n\r\n  /**\r\n   * @param {module:ol/format/GPX~Options=} opt_options Options.\r\n   */\r\n  constructor(opt_options) {\r\n    super();\r\n\r\n    const options = opt_options ? opt_options : {};\r\n\r\n\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    this.dataProjection = getProjection('EPSG:4326');\r\n\r\n    /**\r\n     * @type {function(module:ol/Feature, Node)|undefined}\r\n     * @private\r\n     */\r\n    this.readExtensions_ = options.readExtensions;\r\n  }\r\n\r\n  /**\r\n   * @param {Array.<module:ol/Feature>} features List of features.\r\n   * @private\r\n   */\r\n  handleReadExtensions_(features) {\r\n    if (!features) {\r\n      features = [];\r\n    }\r\n    for (let i = 0, ii = features.length; i < ii; ++i) {\r\n      const feature = features[i];\r\n      if (this.readExtensions_) {\r\n        const extensionsNode = feature.get('extensionsNode_') || null;\r\n        this.readExtensions_(feature, extensionsNode);\r\n      }\r\n      feature.set('extensionsNode_', undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  readFeatureFromNode(node, opt_options) {\r\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\r\n      return null;\r\n    }\r\n    const featureReader = FEATURE_READER[node.localName];\r\n    if (!featureReader) {\r\n      return null;\r\n    }\r\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\r\n    if (!feature) {\r\n      return null;\r\n    }\r\n    this.handleReadExtensions_([feature]);\r\n    return feature;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   */\r\n  readFeaturesFromNode(node, opt_options) {\r\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\r\n      return [];\r\n    }\r\n    if (node.localName == 'gpx') {\r\n      /** @type {Array.<module:ol/Feature>} */\r\n      const features = pushParseAndPop([], GPX_PARSERS,\r\n        node, [this.getReadOptions(node, opt_options)]);\r\n      if (features) {\r\n        this.handleReadExtensions_(features);\r\n        return features;\r\n      } else {\r\n        return [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Encode an array of features in the GPX format as an XML node.\r\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\r\n   * as tracks (`<trk>`).\r\n   *\r\n   * @param {Array.<module:ol/Feature>} features Features.\r\n   * @param {module:ol/format/Feature~WriteOptions=} opt_options Options.\r\n   * @return {Node} Node.\r\n   * @override\r\n   * @api\r\n   */\r\n  writeFeaturesNode(features, opt_options) {\r\n    opt_options = this.adaptOptions(opt_options);\r\n    //FIXME Serialize metadata\r\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\r\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\r\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\r\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\r\n    gpx.setAttribute('version', '1.1');\r\n    gpx.setAttribute('creator', 'OpenLayers');\r\n\r\n    pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\r\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\r\n    return gpx;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst RTE_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'name': makeObjectPropertySetter(readString),\r\n    'cmt': makeObjectPropertySetter(readString),\r\n    'desc': makeObjectPropertySetter(readString),\r\n    'src': makeObjectPropertySetter(readString),\r\n    'link': parseLink,\r\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\r\n    'extensions': parseExtensions,\r\n    'type': makeObjectPropertySetter(readString),\r\n    'rtept': parseRtePt\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst RTEPT_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'ele': makeObjectPropertySetter(readDecimal),\r\n    'time': makeObjectPropertySetter(readDateTime)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst TRK_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'name': makeObjectPropertySetter(readString),\r\n    'cmt': makeObjectPropertySetter(readString),\r\n    'desc': makeObjectPropertySetter(readString),\r\n    'src': makeObjectPropertySetter(readString),\r\n    'link': parseLink,\r\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\r\n    'type': makeObjectPropertySetter(readString),\r\n    'extensions': parseExtensions,\r\n    'trkseg': parseTrkSeg\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst TRKSEG_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'trkpt': parseTrkPt\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst TRKPT_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'ele': makeObjectPropertySetter(readDecimal),\r\n    'time': makeObjectPropertySetter(readDateTime)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Parser>>}\r\n */\r\nconst WPT_PARSERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'ele': makeObjectPropertySetter(readDecimal),\r\n    'time': makeObjectPropertySetter(readDateTime),\r\n    'magvar': makeObjectPropertySetter(readDecimal),\r\n    'geoidheight': makeObjectPropertySetter(readDecimal),\r\n    'name': makeObjectPropertySetter(readString),\r\n    'cmt': makeObjectPropertySetter(readString),\r\n    'desc': makeObjectPropertySetter(readString),\r\n    'src': makeObjectPropertySetter(readString),\r\n    'link': parseLink,\r\n    'sym': makeObjectPropertySetter(readString),\r\n    'type': makeObjectPropertySetter(readString),\r\n    'fix': makeObjectPropertySetter(readString),\r\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\r\n    'hdop': makeObjectPropertySetter(readDecimal),\r\n    'vdop': makeObjectPropertySetter(readDecimal),\r\n    'pdop': makeObjectPropertySetter(readDecimal),\r\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\r\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\r\n    'extensions': parseExtensions\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Array.<string>}\r\n */\r\nconst LINK_SEQUENCE = ['text', 'type'];\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst LINK_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'text': makeChildAppender(writeStringTextNode),\r\n    'type': makeChildAppender(writeStringTextNode)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Array.<string>>}\r\n */\r\nconst RTE_SEQUENCE = makeStructureNS(\r\n  NAMESPACE_URIS, [\r\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\r\n  ]);\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst RTE_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'name': makeChildAppender(writeStringTextNode),\r\n    'cmt': makeChildAppender(writeStringTextNode),\r\n    'desc': makeChildAppender(writeStringTextNode),\r\n    'src': makeChildAppender(writeStringTextNode),\r\n    'link': makeChildAppender(writeLink),\r\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\r\n    'type': makeChildAppender(writeStringTextNode),\r\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Array.<string>>}\r\n */\r\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\r\n  NAMESPACE_URIS, [\r\n    'ele', 'time'\r\n  ]);\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Array.<string>>}\r\n */\r\nconst TRK_SEQUENCE = makeStructureNS(\r\n  NAMESPACE_URIS, [\r\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\r\n  ]);\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst TRK_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'name': makeChildAppender(writeStringTextNode),\r\n    'cmt': makeChildAppender(writeStringTextNode),\r\n    'desc': makeChildAppender(writeStringTextNode),\r\n    'src': makeChildAppender(writeStringTextNode),\r\n    'link': makeChildAppender(writeLink),\r\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\r\n    'type': makeChildAppender(writeStringTextNode),\r\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {function(*, Array.<*>, string=): (Node|undefined)}\r\n */\r\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst TRKSEG_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'trkpt': makeChildAppender(writeWptType)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Array.<string>>}\r\n */\r\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\r\n  NAMESPACE_URIS, [\r\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\r\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\r\n    'ageofdgpsdata', 'dgpsid'\r\n  ]);\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, Object.<string, module:ol/xml~Serializer>>}\r\n */\r\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\r\n  NAMESPACE_URIS, {\r\n    'ele': makeChildAppender(writeDecimalTextNode),\r\n    'time': makeChildAppender(writeDateTimeTextNode),\r\n    'magvar': makeChildAppender(writeDecimalTextNode),\r\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\r\n    'name': makeChildAppender(writeStringTextNode),\r\n    'cmt': makeChildAppender(writeStringTextNode),\r\n    'desc': makeChildAppender(writeStringTextNode),\r\n    'src': makeChildAppender(writeStringTextNode),\r\n    'link': makeChildAppender(writeLink),\r\n    'sym': makeChildAppender(writeStringTextNode),\r\n    'type': makeChildAppender(writeStringTextNode),\r\n    'fix': makeChildAppender(writeStringTextNode),\r\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\r\n    'hdop': makeChildAppender(writeDecimalTextNode),\r\n    'vdop': makeChildAppender(writeDecimalTextNode),\r\n    'pdop': makeChildAppender(writeDecimalTextNode),\r\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\r\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\r\n  });\r\n\r\n\r\n/**\r\n * @const\r\n * @type {Object.<string, string>}\r\n */\r\nconst GEOMETRY_TYPE_TO_NODENAME = {\r\n  'Point': 'wpt',\r\n  'LineString': 'rte',\r\n  'MultiLineString': 'trk'\r\n};\r\n\r\n\r\n/**\r\n * @param {*} value Value.\r\n * @param {Array.<*>} objectStack Object stack.\r\n * @param {string=} opt_nodeName Node name.\r\n * @return {Node|undefined} Node.\r\n */\r\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\r\n  const geometry = /** @type {module:ol/Feature} */ (value).getGeometry();\r\n  if (geometry) {\r\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\r\n    if (nodeName) {\r\n      const parentNode = objectStack[objectStack.length - 1].node;\r\n      return createElementNS(parentNode.namespaceURI, nodeName);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\r\n * @param {Node} node Node.\r\n * @param {!Object} values Values.\r\n * @return {Array.<number>} Flat coordinates.\r\n */\r\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\r\n  flatCoordinates.push(\r\n    parseFloat(node.getAttribute('lon')),\r\n    parseFloat(node.getAttribute('lat')));\r\n  if ('ele' in values) {\r\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\r\n    delete values['ele'];\r\n    layoutOptions.hasZ = true;\r\n  } else {\r\n    flatCoordinates.push(0);\r\n  }\r\n  if ('time' in values) {\r\n    flatCoordinates.push(/** @type {number} */ (values['time']));\r\n    delete values['time'];\r\n    layoutOptions.hasM = true;\r\n  } else {\r\n    flatCoordinates.push(0);\r\n  }\r\n  return flatCoordinates;\r\n}\r\n\r\n\r\n/**\r\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\r\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\r\n *\r\n * @param {module:ol/format/GPX~LayoutOptions} layoutOptions Layout options.\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {Array.<number>=} ends Ends.\r\n * @return {module:ol/geom/GeometryLayout} Layout.\r\n */\r\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\r\n  let layout = GeometryLayout.XY;\r\n  let stride = 2;\r\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\r\n    layout = GeometryLayout.XYZM;\r\n    stride = 4;\r\n  } else if (layoutOptions.hasZ) {\r\n    layout = GeometryLayout.XYZ;\r\n    stride = 3;\r\n  } else if (layoutOptions.hasM) {\r\n    layout = GeometryLayout.XYM;\r\n    stride = 3;\r\n  }\r\n  if (stride !== 4) {\r\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\r\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\r\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\r\n      if (layoutOptions.hasZ) {\r\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\r\n      }\r\n      if (layoutOptions.hasM) {\r\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\r\n      }\r\n    }\r\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\r\n    if (ends) {\r\n      for (let i = 0, ii = ends.length; i < ii; i++) {\r\n        ends[i] = ends[i] / 4 * stride;\r\n      }\r\n    }\r\n  }\r\n  return layout;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction parseLink(node, objectStack) {\r\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\r\n  const href = node.getAttribute('href');\r\n  if (href !== null) {\r\n    values['link'] = href;\r\n  }\r\n  parseNode(LINK_PARSERS, node, objectStack);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction parseExtensions(node, objectStack) {\r\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\r\n  values['extensionsNode_'] = node;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction parseRtePt(node, objectStack) {\r\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\r\n  if (values) {\r\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\r\n    const flatCoordinates = /** @type {Array.<number>} */ (rteValues['flatCoordinates']);\r\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (rteValues['layoutOptions']);\r\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction parseTrkPt(node, objectStack) {\r\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\r\n  if (values) {\r\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\r\n    const flatCoordinates = /** @type {Array.<number>} */ (trkValues['flatCoordinates']);\r\n    const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (trkValues['layoutOptions']);\r\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction parseTrkSeg(node, objectStack) {\r\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\r\n  parseNode(TRKSEG_PARSERS, node, objectStack);\r\n  const flatCoordinates = /** @type {Array.<number>} */\r\n      (values['flatCoordinates']);\r\n  const ends = /** @type {Array.<number>} */ (values['ends']);\r\n  ends.push(flatCoordinates.length);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n * @return {module:ol/Feature|undefined} Track.\r\n */\r\nfunction readRte(node, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\r\n  const values = pushParseAndPop({\r\n    'flatCoordinates': [],\r\n    'layoutOptions': {}\r\n  }, RTE_PARSERS, node, objectStack);\r\n  if (!values) {\r\n    return undefined;\r\n  }\r\n  const flatCoordinates = /** @type {Array.<number>} */\r\n      (values['flatCoordinates']);\r\n  delete values['flatCoordinates'];\r\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\r\n  delete values['layoutOptions'];\r\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\r\n  const geometry = new LineString(flatCoordinates, layout);\r\n  transformWithOptions(geometry, false, options);\r\n  const feature = new Feature(geometry);\r\n  feature.setProperties(values);\r\n  return feature;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n * @return {module:ol/Feature|undefined} Track.\r\n */\r\nfunction readTrk(node, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\r\n  const values = pushParseAndPop({\r\n    'flatCoordinates': [],\r\n    'ends': [],\r\n    'layoutOptions': {}\r\n  }, TRK_PARSERS, node, objectStack);\r\n  if (!values) {\r\n    return undefined;\r\n  }\r\n  const flatCoordinates = /** @type {Array.<number>} */\r\n      (values['flatCoordinates']);\r\n  delete values['flatCoordinates'];\r\n  const ends = /** @type {Array.<number>} */ (values['ends']);\r\n  delete values['ends'];\r\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ (values['layoutOptions']);\r\n  delete values['layoutOptions'];\r\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\r\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\r\n  transformWithOptions(geometry, false, options);\r\n  const feature = new Feature(geometry);\r\n  feature.setProperties(values);\r\n  return feature;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {Array.<*>} objectStack Object stack.\r\n * @return {module:ol/Feature|undefined} Waypoint.\r\n */\r\nfunction readWpt(node, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~ReadOptions} */ (objectStack[0]);\r\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\r\n  if (!values) {\r\n    return undefined;\r\n  }\r\n  const layoutOptions = /** @type {module:ol/format/GPX~LayoutOptions} */ ({});\r\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\r\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\r\n  const geometry = new Point(coordinates, layout);\r\n  transformWithOptions(geometry, false, options);\r\n  const feature = new Feature(geometry);\r\n  feature.setProperties(values);\r\n  return feature;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {string} value Value for the link's `href` attribute.\r\n * @param {Array.<*>} objectStack Node stack.\r\n */\r\nfunction writeLink(node, value, objectStack) {\r\n  node.setAttribute('href', value);\r\n  const context = objectStack[objectStack.length - 1];\r\n  const properties = context['properties'];\r\n  const link = [\r\n    properties['linkText'],\r\n    properties['linkType']\r\n  ];\r\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */ ({node: node}),\r\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\r\n    link, objectStack, LINK_SEQUENCE);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {module:ol/coordinate~Coordinate} coordinate Coordinate.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction writeWptType(node, coordinate, objectStack) {\r\n  const context = objectStack[objectStack.length - 1];\r\n  const parentNode = context.node;\r\n  const namespaceURI = parentNode.namespaceURI;\r\n  const properties = context['properties'];\r\n  //FIXME Projection handling\r\n  node.setAttributeNS(null, 'lat', coordinate[1]);\r\n  node.setAttributeNS(null, 'lon', coordinate[0]);\r\n  const geometryLayout = context['geometryLayout'];\r\n  switch (geometryLayout) {\r\n    case GeometryLayout.XYZM:\r\n      if (coordinate[3] !== 0) {\r\n        properties['time'] = coordinate[3];\r\n      }\r\n      // fall through\r\n    case GeometryLayout.XYZ:\r\n      if (coordinate[2] !== 0) {\r\n        properties['ele'] = coordinate[2];\r\n      }\r\n      break;\r\n    case GeometryLayout.XYM:\r\n      if (coordinate[2] !== 0) {\r\n        properties['time'] = coordinate[2];\r\n      }\r\n      break;\r\n    default:\r\n      // pass\r\n  }\r\n  const orderedKeys = (node.nodeName == 'rtept') ?\r\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\r\n    WPT_TYPE_SEQUENCE[namespaceURI];\r\n  const values = makeSequence(properties, orderedKeys);\r\n  pushSerializeAndPop(/** @type {module:ol/xml~NodeStackItem} */\r\n    ({node: node, 'properties': properties}),\r\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\r\n    values, objectStack, orderedKeys);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {module:ol/Feature} feature Feature.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction writeRte(node, feature, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\r\n  const properties = feature.getProperties();\r\n  const context = {node: node, 'properties': properties};\r\n  let geometry = feature.getGeometry();\r\n  if (geometry) {\r\n    geometry = /** @type {module:ol/geom/LineString} */ (transformWithOptions(geometry, true, options));\r\n    context['geometryLayout'] = geometry.getLayout();\r\n    properties['rtept'] = geometry.getCoordinates();\r\n  }\r\n  const parentNode = objectStack[objectStack.length - 1].node;\r\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\r\n  const values = makeSequence(properties, orderedKeys);\r\n  pushSerializeAndPop(context,\r\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\r\n    values, objectStack, orderedKeys);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {module:ol/Feature} feature Feature.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction writeTrk(node, feature, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\r\n  const properties = feature.getProperties();\r\n  /** @type {module:ol/xml~NodeStackItem} */\r\n  const context = {node: node, 'properties': properties};\r\n  let geometry = feature.getGeometry();\r\n  if (geometry) {\r\n    geometry = /** @type {module:ol/geom/MultiLineString} */\r\n      (transformWithOptions(geometry, true, options));\r\n    properties['trkseg'] = geometry.getLineStrings();\r\n  }\r\n  const parentNode = objectStack[objectStack.length - 1].node;\r\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\r\n  const values = makeSequence(properties, orderedKeys);\r\n  pushSerializeAndPop(context,\r\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\r\n    values, objectStack, orderedKeys);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {module:ol/geom/LineString} lineString LineString.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction writeTrkSeg(node, lineString, objectStack) {\r\n  /** @type {module:ol/xml~NodeStackItem} */\r\n  const context = {node: node, 'geometryLayout': lineString.getLayout(),\r\n    'properties': {}};\r\n  pushSerializeAndPop(context,\r\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\r\n    lineString.getCoordinates(), objectStack);\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @param {module:ol/Feature} feature Feature.\r\n * @param {Array.<*>} objectStack Object stack.\r\n */\r\nfunction writeWpt(node, feature, objectStack) {\r\n  const options = /** @type {module:ol/format/Feature~WriteOptions} */ (objectStack[0]);\r\n  const context = objectStack[objectStack.length - 1];\r\n  context['properties'] = feature.getProperties();\r\n  let geometry = feature.getGeometry();\r\n  if (geometry) {\r\n    geometry = /** @type {module:ol/geom/Point} */\r\n      (transformWithOptions(geometry, true, options));\r\n    context['geometryLayout'] = geometry.getLayout();\r\n    writeWptType(node, geometry.getCoordinates(), objectStack);\r\n  }\r\n}\r\n\r\n\r\nexport default GPX;\r\n"],"names":["const","super","let","this","i","ii"],"mappings":"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"}