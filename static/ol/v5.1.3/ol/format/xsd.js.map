{"version":3,"file":"xsd.js","sources":["../../../src/ol/format/xsd.js"],"sourcesContent":["/**\r\n * @module ol/format/xsd\r\n */\r\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\r\nimport {padNumber} from '../string.js';\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @return {boolean|undefined} Boolean.\r\n */\r\nexport function readBoolean(node) {\r\n  const s = getAllTextContent(node, false);\r\n  return readBooleanString(s);\r\n}\r\n\r\n\r\n/**\r\n * @param {string} string String.\r\n * @return {boolean|undefined} Boolean.\r\n */\r\nexport function readBooleanString(string) {\r\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\r\n  if (m) {\r\n    return m[1] !== undefined || false;\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @return {number|undefined} DateTime in seconds.\r\n */\r\nexport function readDateTime(node) {\r\n  const s = getAllTextContent(node, false);\r\n  const dateTime = Date.parse(s);\r\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @return {number|undefined} Decimal.\r\n */\r\nexport function readDecimal(node) {\r\n  const s = getAllTextContent(node, false);\r\n  return readDecimalString(s);\r\n}\r\n\r\n\r\n/**\r\n * @param {string} string String.\r\n * @return {number|undefined} Decimal.\r\n */\r\nexport function readDecimalString(string) {\r\n  // FIXME check spec\r\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\r\n  if (m) {\r\n    return parseFloat(m[1]);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @return {number|undefined} Non negative integer.\r\n */\r\nexport function readNonNegativeInteger(node) {\r\n  const s = getAllTextContent(node, false);\r\n  return readNonNegativeIntegerString(s);\r\n}\r\n\r\n\r\n/**\r\n * @param {string} string String.\r\n * @return {number|undefined} Non negative integer.\r\n */\r\nexport function readNonNegativeIntegerString(string) {\r\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\r\n  if (m) {\r\n    return parseInt(m[1], 10);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node.\r\n * @return {string|undefined} String.\r\n */\r\nexport function readString(node) {\r\n  return getAllTextContent(node, false).trim();\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a TextNode with the boolean to.\r\n * @param {boolean} bool Boolean.\r\n */\r\nexport function writeBooleanTextNode(node, bool) {\r\n  writeStringTextNode(node, (bool) ? '1' : '0');\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a CDATA Section with the string to.\r\n * @param {string} string String.\r\n */\r\nexport function writeCDATASection(node, string) {\r\n  node.appendChild(DOCUMENT.createCDATASection(string));\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a TextNode with the dateTime to.\r\n * @param {number} dateTime DateTime in seconds.\r\n */\r\nexport function writeDateTimeTextNode(node, dateTime) {\r\n  const date = new Date(dateTime * 1000);\r\n  const string = date.getUTCFullYear() + '-' +\r\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\r\n      padNumber(date.getUTCDate(), 2) + 'T' +\r\n      padNumber(date.getUTCHours(), 2) + ':' +\r\n      padNumber(date.getUTCMinutes(), 2) + ':' +\r\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\r\n  node.appendChild(DOCUMENT.createTextNode(string));\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a TextNode with the decimal to.\r\n * @param {number} decimal Decimal.\r\n */\r\nexport function writeDecimalTextNode(node, decimal) {\r\n  const string = decimal.toPrecision();\r\n  node.appendChild(DOCUMENT.createTextNode(string));\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a TextNode with the decimal to.\r\n * @param {number} nonNegativeInteger Non negative integer.\r\n */\r\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\r\n  const string = nonNegativeInteger.toString();\r\n  node.appendChild(DOCUMENT.createTextNode(string));\r\n}\r\n\r\n\r\n/**\r\n * @param {Node} node Node to append a TextNode with the string to.\r\n * @param {string} string String.\r\n */\r\nexport function writeStringTextNode(node, string) {\r\n  node.appendChild(DOCUMENT.createTextNode(string));\r\n}\r\n"],"names":["const"],"mappings":"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"}