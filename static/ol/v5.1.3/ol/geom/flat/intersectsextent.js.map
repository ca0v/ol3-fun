{"version":3,"file":"intersectsextent.js","sources":["../../../../src/ol/geom/flat/intersectsextent.js"],"sourcesContent":["/**\r\n * @module ol/geom/flat/intersectsextent\r\n */\r\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\r\nimport {linearRingContainsXY, linearRingContainsExtent} from '../flat/contains.js';\r\nimport {forEach as forEachSegment} from '../flat/segments.js';\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {number} offset Offset.\r\n * @param {number} end End.\r\n * @param {number} stride Stride.\r\n * @param {module:ol/extent~Extent} extent Extent.\r\n * @return {boolean} True if the geometry and the extent intersect.\r\n */\r\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\r\n  const coordinatesExtent = extendFlatCoordinates(\r\n    createEmpty(), flatCoordinates, offset, end, stride);\r\n  if (!intersects(extent, coordinatesExtent)) {\r\n    return false;\r\n  }\r\n  if (containsExtent(extent, coordinatesExtent)) {\r\n    return true;\r\n  }\r\n  if (coordinatesExtent[0] >= extent[0] &&\r\n      coordinatesExtent[2] <= extent[2]) {\r\n    return true;\r\n  }\r\n  if (coordinatesExtent[1] >= extent[1] &&\r\n      coordinatesExtent[3] <= extent[3]) {\r\n    return true;\r\n  }\r\n  return forEachSegment(flatCoordinates, offset, end, stride,\r\n    /**\r\n     * @param {module:ol/coordinate~Coordinate} point1 Start point.\r\n     * @param {module:ol/coordinate~Coordinate} point2 End point.\r\n     * @return {boolean} `true` if the segment and the extent intersect,\r\n     *     `false` otherwise.\r\n     */\r\n    function(point1, point2) {\r\n      return intersectsSegment(extent, point1, point2);\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {number} offset Offset.\r\n * @param {Array.<number>} ends Ends.\r\n * @param {number} stride Stride.\r\n * @param {module:ol/extent~Extent} extent Extent.\r\n * @return {boolean} True if the geometry and the extent intersect.\r\n */\r\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\r\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\r\n    if (intersectsLineString(\r\n      flatCoordinates, offset, ends[i], stride, extent)) {\r\n      return true;\r\n    }\r\n    offset = ends[i];\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {number} offset Offset.\r\n * @param {number} end End.\r\n * @param {number} stride Stride.\r\n * @param {module:ol/extent~Extent} extent Extent.\r\n * @return {boolean} True if the geometry and the extent intersect.\r\n */\r\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\r\n  if (intersectsLineString(\r\n    flatCoordinates, offset, end, stride, extent)) {\r\n    return true;\r\n  }\r\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\r\n    return true;\r\n  }\r\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\r\n    return true;\r\n  }\r\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\r\n    return true;\r\n  }\r\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {number} offset Offset.\r\n * @param {Array.<number>} ends Ends.\r\n * @param {number} stride Stride.\r\n * @param {module:ol/extent~Extent} extent Extent.\r\n * @return {boolean} True if the geometry and the extent intersect.\r\n */\r\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\r\n  if (!intersectsLinearRing(\r\n    flatCoordinates, offset, ends[0], stride, extent)) {\r\n    return false;\r\n  }\r\n  if (ends.length === 1) {\r\n    return true;\r\n  }\r\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\r\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n\r\n/**\r\n * @param {Array.<number>} flatCoordinates Flat coordinates.\r\n * @param {number} offset Offset.\r\n * @param {Array.<Array.<number>>} endss Endss.\r\n * @param {number} stride Stride.\r\n * @param {module:ol/extent~Extent} extent Extent.\r\n * @return {boolean} True if the geometry and the extent intersect.\r\n */\r\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\r\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\r\n    const ends = endss[i];\r\n    if (intersectsLinearRingArray(\r\n      flatCoordinates, offset, ends, stride, extent)) {\r\n      return true;\r\n    }\r\n    offset = ends[ends.length - 1];\r\n  }\r\n  return false;\r\n}\r\n"],"names":["const","let"],"mappings":"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"}