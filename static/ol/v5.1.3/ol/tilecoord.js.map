{"version":3,"file":"tilecoord.js","sources":["../../src/ol/tilecoord.js"],"sourcesContent":["/**\r\n * @module ol/tilecoord\r\n */\r\n\r\n\r\n/**\r\n * An array of three numbers representing the location of a tile in a tile\r\n * grid. The order is `z`, `x`, and `y`. `z` is the zoom level.\r\n * @typedef {Array.<number>} TileCoord\r\n * @api\r\n */\r\n\r\n\r\n/**\r\n * @param {number} z Z.\r\n * @param {number} x X.\r\n * @param {number} y Y.\r\n * @param {module:ol/tilecoord~TileCoord=} opt_tileCoord Tile coordinate.\r\n * @return {module:ol/tilecoord~TileCoord} Tile coordinate.\r\n */\r\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\r\n  if (opt_tileCoord !== undefined) {\r\n    opt_tileCoord[0] = z;\r\n    opt_tileCoord[1] = x;\r\n    opt_tileCoord[2] = y;\r\n    return opt_tileCoord;\r\n  } else {\r\n    return [z, x, y];\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {number} z Z.\r\n * @param {number} x X.\r\n * @param {number} y Y.\r\n * @return {string} Key.\r\n */\r\nexport function getKeyZXY(z, x, y) {\r\n  return z + '/' + x + '/' + y;\r\n}\r\n\r\n\r\n/**\r\n * Get the key for a tile coord.\r\n * @param {module:ol/tilecoord~TileCoord} tileCoord The tile coord.\r\n * @return {string} Key.\r\n */\r\nexport function getKey(tileCoord) {\r\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\r\n}\r\n\r\n\r\n/**\r\n * Get a tile coord given a key.\r\n * @param {string} key The tile coord key.\r\n * @return {module:ol/tilecoord~TileCoord} The tile coord.\r\n */\r\nexport function fromKey(key) {\r\n  return key.split('/').map(Number);\r\n}\r\n\r\n\r\n/**\r\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\r\n * @return {number} Hash.\r\n */\r\nexport function hash(tileCoord) {\r\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\r\n}\r\n\r\n\r\n/**\r\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coord.\r\n * @return {string} Quad key.\r\n */\r\nexport function quadKey(tileCoord) {\r\n  const z = tileCoord[0];\r\n  const digits = new Array(z);\r\n  let mask = 1 << (z - 1);\r\n  let i, charCode;\r\n  for (i = 0; i < z; ++i) {\r\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\r\n    charCode = 48;\r\n    if (tileCoord[1] & mask) {\r\n      charCode += 1;\r\n    }\r\n    if (tileCoord[2] & mask) {\r\n      charCode += 2;\r\n    }\r\n    digits[i] = String.fromCharCode(charCode);\r\n    mask >>= 1;\r\n  }\r\n  return digits.join('');\r\n}\r\n\r\n\r\n/**\r\n * @param {module:ol/tilecoord~TileCoord} tileCoord Tile coordinate.\r\n * @param {!module:ol/tilegrid/TileGrid} tileGrid Tile grid.\r\n * @return {boolean} Tile coordinate is within extent and zoom level range.\r\n */\r\nexport function withinExtentAndZ(tileCoord, tileGrid) {\r\n  const z = tileCoord[0];\r\n  const x = tileCoord[1];\r\n  const y = tileCoord[2];\r\n\r\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\r\n    return false;\r\n  }\r\n  const extent = tileGrid.getExtent();\r\n  let tileRange;\r\n  if (!extent) {\r\n    tileRange = tileGrid.getFullTileRange(z);\r\n  } else {\r\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\r\n  }\r\n  if (!tileRange) {\r\n    return true;\r\n  } else {\r\n    return tileRange.containsXY(x, y);\r\n  }\r\n}\r\n"],"names":["const","let"],"mappings":"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"}